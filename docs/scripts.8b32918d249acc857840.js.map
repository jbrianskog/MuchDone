{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"React\"","webpack:///external \"ReactDOM\"","webpack:///./domain/events.ts","webpack:///../node_modules/react-onclickoutside/dist/react-onclickoutside.es.js","webpack:///./components/todo-list-panel/completed-todo-list/completed-todo-list-item/completed-todo-panel/completed-todo-title.tsx","webpack:///./components/todo-list-panel/todo-list/todo-list-item/todo-panel/todo-title.tsx","webpack:///../node_modules/uuid/index.js","webpack:///../node_modules/uuid/lib/rng-browser.js","webpack:///../node_modules/uuid/lib/bytesToUuid.js","webpack:///./data.ts","webpack:///./components/todo-list-panel/todo-list/todo-list-item/todo-actions-panel/todo-actions-panel-btn-group.tsx","webpack:///./components/todo-list-panel/todo-list/todo-list-item/todo-actions-panel/todo-delete-btn.tsx","webpack:///./components/todo-list-panel/todo-list/todo-list-item/todo-actions-panel/todo-rename-btn.tsx","webpack:///./components/todo-list-panel/todo-list/todo-list-item/todo-panel/todo-panel-btn-group.tsx","webpack:///./components/todo-list-panel/todo-list/todo-list-item/todo-rename-panel/todo-rename-form.tsx","webpack:///./app.tsx","webpack:///./components/body.tsx","webpack:///../node_modules/uuid/v1.js","webpack:///../node_modules/uuid/v4.js","webpack:///./domain/todo-list.ts","webpack:///./domain/aggregate-root.ts","webpack:///./domain/todo.ts","webpack:///./data/indexeddb-event-store.ts","webpack:///../node_modules/idb/lib/idb.js","webpack:///./components/event-list.tsx","webpack:///./components/event-list/event-list-item.tsx","webpack:///./components/event-list-empty.tsx","webpack:///./components/history-todo-list-panel.tsx","webpack:///./components/history-todo-list-panel/history-completed-todo-list.tsx","webpack:///./components/history-todo-list-panel/history-completed-todo-list/history-completed-todo-list-item.tsx","webpack:///./components/history-todo-list-panel/history-todo-list.tsx","webpack:///./components/history-todo-list-panel/history-todo-list/history-todo-list-item.tsx","webpack:///./components/todo-list-panel.tsx","webpack:///./components/todo-list-panel/completed-todo-list.tsx","webpack:///./components/todo-list-panel/completed-todo-list/completed-todo-list-item.tsx","webpack:///./components/todo-list-panel/completed-todo-list/completed-todo-list-item/completed-todo-actions-panel.tsx","webpack:///./components/todo-list-panel/completed-todo-list/completed-todo-list-item/completed-todo-panel.tsx","webpack:///./components/todo-list-panel/completed-todo-list/completed-todo-list-item/completed-todo-rename-panel.tsx","webpack:///./components/todo-list-panel/todo-add-form.tsx","webpack:///./components/todo-list-panel/todo-list.tsx","webpack:///./components/todo-list-panel/todo-list/todo-list-item.tsx","webpack:///./components/todo-list-panel/todo-list/todo-list-item/todo-actions-panel.tsx","webpack:///./components/todo-list-panel/todo-list/todo-list-item/todo-actions-panel/todo-move-down-btn.tsx","webpack:///./components/todo-list-panel/todo-list/todo-list-item/todo-actions-panel/todo-move-up-btn.tsx","webpack:///./components/todo-list-panel/todo-list/todo-list-item/todo-panel.tsx","webpack:///./components/todo-list-panel/todo-list/todo-list-item/todo-rename-panel.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","React","ReactDOM","DomainEventTypeName","TodoAdded","[object Object]","aggregateId","todoId","todoName","this","type","TodoRemoved","TodoCompleted","todoCompletionTimestamp","TodoUncompleted","TodoRenamed","TodoPositionChanged","todoOffset","__webpack_exports__","IGNORE_CLASS_NAME","react__WEBPACK_IMPORTED_MODULE_0__","react_dom__WEBPACK_IMPORTED_MODULE_1__","isNodeFound","current","componentNode","ignoreClass","correspondingElement","classList","contains","testPassiveEventSupport","window","addEventListener","passive","options","noop","removeEventListener","passiveEventSupport","uid","seed","autoInc","handlersMap","enabledInstances","touchEvents","getEventHandlerOptions","instance","eventName","handlerOptions","indexOf","props","preventDefault","WrappedComponent","config","_class","_temp","_Component","onClickOutside","_this","__outsideClickHandler","event","__clickOutsideHandlerProp","getInstance","handleClickOutside","Error","enableOnClickOutside","document","_uid","events","eventTypes","forEach","disableOnClickOutside","stopPropagation","excludeScrollbar","evt","documentElement","clientWidth","clientX","clientHeight","clientY","clickedScrollbar","parentNode","findHighest","target","outsideClickIgnoreClass","fn","getRef","ref","instanceRef","subClass","superClass","constructor","__proto__","_inheritsLoose","_proto","isReactComponent","componentDidMount","createElement","componentDidUpdate","componentWillUnmount","render","_props","source","excluded","sourceKeys","keys","length","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_objectWithoutProperties","wrappedRef","displayName","defaultProps","getClass","CompletedTodoTitle","PureComponent","className","title","completionDate","toLocaleDateString","TodoTitle","v1","v4","uuid","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","rnds","Array","Math","random","byteToHex","toString","substr","buf","offset","bth","join","events_1","db","IndexedDBEventStore","todoListEvents","getEventsByAggregate","todoListId","lists","reduce","push","todoListIds","getAllEvents","addEvents","react_onclickoutside_1","TodoActionsPanelBtnGroup","default","showDefaultPanel","role","children","TodoDeleteBtn","onClick","deleteTodo","aria-label","aria-hidden","TodoRenameBtn","showRenamePanel","TodoPanelBtnGroup","showActionsPanel","TodoRenameForm","super","onChange","e","setState","onSubmit","renameTodo","state","todo","inputId","id","htmlFor","required","body_1","data_1","indexedDB","alert","then","Body","getElementById","catch","console","log","uuid_1","todo_list_1","event_list_1","event_list_empty_1","history_todo_list_panel_1","todo_list_panel_1","updateDomainTodoList","command","__awaiter","todoList","TodoList","uncommittedEvents","addTodo","list","add","completeTodo","complete","Date","now","uncompleteTodo","uncomplete","remove","moveTodoUp","changePosition","moveTodoDown","renametodo","rename","showHistoryVersion","version","history","historyVersion","showCurrentVersion","slice","HistoryTodoListPanel","todos","completedTodos","TodoListPanel","EventList","EventListEmpty","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","b","node","clockseq","undefined","seedBytes","msecs","getTime","nsecs","dt","tl","tmh","ii","aggregate_root_1","todo_1","AggregateRoot","_todos","filter","x","isCompleted","sort","y","completionTimestamp","init","_id","Todo","findIndex","splice","oldTodo","newTodo","CompletedTodo","find","incompleteTodoPositions","from","to","arraySwap","arr","a","agId","applyAndStage","_uncommittedEvents","idb_1","aggregateIdPropName","eventIdPropName","dbName","storeName","open","oldVersion","createObjectStore","autoIncrement","keyPath","createIndex","tx","transaction","store","objectStore","cursorCallback","cursor","continue","iterateCursor","IDBKeyRange","upperBound","index","addPromises","Promise","all","promisifyRequest","request","resolve","reject","onsuccess","result","onerror","error","promisifyRequestCall","obj","method","args","apply","proxyProperties","ProxyClass","targetProp","properties","prop","set","val","proxyRequestMethods","Constructor","arguments","proxyMethods","proxyCursorRequestMethods","Cursor","promisifyCursorRequestCall","Index","_index","_cursor","_request","ObjectStore","_store","Transaction","idbTransaction","_tx","oncomplete","onabort","UpgradeDB","_db","DB","IDBIndex","IDBCursor","methodName","IDBObjectStore","IDBTransaction","IDBDatabase","funcName","replace","toArray","callback","nativeObject","getAll","query","count","items","exp","upgradeCallback","onupgradeneeded","delete","event_list_item_1","EventListInner","map","EventListItem","showHistory","history_completed_todo_list_1","history_todo_list_1","HistoryTodoList","HistoryCompletedTodoList","history_completed_todo_list_item_1","HistoryCompletedTodoListItem","completed_todo_title_1","history_todo_list_item_1","HistoryTodoListItem","todo_title_1","completed_todo_list_1","todo_add_form_1","TodoAddForm","CompletedTodoList","completed_todo_list_item_1","CompletedTodoListItem","completed_todo_actions_panel_1","completed_todo_panel_1","completed_todo_rename_panel_1","PanelType","panel","DefaultPanel","ActionsPanel","RenamePanel","CompletedTodoPanel","CompletedTodoActionsPanel","CompletedTodoRenamePanel","todo_actions_panel_btn_group_1","todo_delete_btn_1","todo_rename_btn_1","react_dom_1","todo_panel_btn_group_1","btnGroupRef","comp","btnGroup","findDOMNode","todo_rename_form_1","assign","reset","placeholder","todo_list_item_1","listItemRef","setMovedTodoRef","movedTodoListItemOffsetTop","offsetTop","movedTodoListItemRef","scrollBy","top","behavior","TodoListItem","todo_actions_panel_1","todo_panel_1","todo_rename_panel_1","TodoPanel","TodoActionsPanel","TodoRenamePanel","todo_move_down_btn_1","todo_move_up_btn_1","createRef","TodoMoveUpBtn","TodoMoveDownBtn"],"mappings":"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","file":"scripts.8b32918d249acc857840.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","module.exports = React;","module.exports = ReactDOM;","import { UncommittedEvent } from \"data/event-store\";\r\nimport { TodoIdType } from \"./todo\";\r\n\r\nexport enum DomainEventTypeName {\r\n  TodoAdded,\r\n  TodoRemoved,\r\n  TodoCompleted,\r\n  TodoUncompleted,\r\n  TodoRenamed,\r\n  TodoPositionChanged,\r\n}\r\nexport type UncommittedDomainEvent = UncommittedEvent<DomainEventTypeName>;\r\n\r\nexport class TodoAdded implements UncommittedDomainEvent {\r\n    readonly type = DomainEventTypeName.TodoAdded;\r\n    constructor(\r\n        readonly aggregateId: string,\r\n        readonly todoId: TodoIdType,\r\n        readonly todoName: string,\r\n    ) { }\r\n}\r\n\r\nexport class TodoRemoved implements UncommittedDomainEvent {\r\n    readonly type = DomainEventTypeName.TodoRemoved;\r\n    constructor(\r\n        readonly aggregateId: string,\r\n        readonly todoId: TodoIdType,\r\n    ) { }\r\n}\r\n\r\nexport class TodoCompleted implements UncommittedDomainEvent {\r\n    readonly type = DomainEventTypeName.TodoCompleted;\r\n    constructor(\r\n        readonly aggregateId: string,\r\n        readonly todoId: TodoIdType,\r\n        readonly todoCompletionTimestamp: number,\r\n    ) { }\r\n}\r\n\r\nexport class TodoUncompleted implements UncommittedDomainEvent {\r\n    readonly type = DomainEventTypeName.TodoUncompleted;\r\n    constructor(\r\n        readonly aggregateId: string,\r\n        readonly todoId: TodoIdType,\r\n    ) { }\r\n}\r\n\r\nexport class TodoRenamed implements UncommittedDomainEvent {\r\n    readonly type = DomainEventTypeName.TodoRenamed;\r\n    constructor(\r\n        readonly aggregateId: string,\r\n        readonly todoId: TodoIdType,\r\n        readonly todoName: string,\r\n    ) { }\r\n}\r\n\r\nexport class TodoPositionChanged implements UncommittedDomainEvent {\r\n    readonly type = DomainEventTypeName.TodoPositionChanged;\r\n    constructor(\r\n        readonly aggregateId: string,\r\n        readonly todoId: TodoIdType,\r\n        readonly todoOffset: number,\r\n    ) { }\r\n}\r\n","import { Component, createElement } from 'react';\nimport { findDOMNode } from 'react-dom';\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n/**\n * Check whether some DOM node is our Component's node.\n */\nfunction isNodeFound(current, componentNode, ignoreClass) {\n  if (current === componentNode) {\n    return true;\n  } // SVG <use/> elements do not technically reside in the rendered DOM, so\n  // they do not have classList directly, but they offer a link to their\n  // corresponding element, which can have classList. This extra check is for\n  // that case.\n  // See: http://www.w3.org/TR/SVG11/struct.html#InterfaceSVGUseElement\n  // Discussion: https://github.com/Pomax/react-onclickoutside/pull/17\n\n\n  if (current.correspondingElement) {\n    return current.correspondingElement.classList.contains(ignoreClass);\n  }\n\n  return current.classList.contains(ignoreClass);\n}\n/**\n * Try to find our node in a hierarchy of nodes, returning the document\n * node as highest node if our node is not found in the path up.\n */\n\nfunction findHighest(current, componentNode, ignoreClass) {\n  if (current === componentNode) {\n    return true;\n  } // If source=local then this event came from 'somewhere'\n  // inside and should be ignored. We could handle this with\n  // a layered approach, too, but that requires going back to\n  // thinking in terms of Dom node nesting, running counter\n  // to React's 'you shouldn't care about the DOM' philosophy.\n\n\n  while (current.parentNode) {\n    if (isNodeFound(current, componentNode, ignoreClass)) {\n      return true;\n    }\n\n    current = current.parentNode;\n  }\n\n  return current;\n}\n/**\n * Check if the browser scrollbar was clicked\n */\n\nfunction clickedScrollbar(evt) {\n  return document.documentElement.clientWidth <= evt.clientX || document.documentElement.clientHeight <= evt.clientY;\n}\n\n// ideally will get replaced with external dep\n// when rafrex/detect-passive-events#4 and rafrex/detect-passive-events#5 get merged in\nvar testPassiveEventSupport = function testPassiveEventSupport() {\n  if (typeof window === 'undefined' || typeof window.addEventListener !== 'function') {\n    return;\n  }\n\n  var passive = false;\n  var options = Object.defineProperty({}, 'passive', {\n    get: function get() {\n      passive = true;\n    }\n  });\n\n  var noop = function noop() {};\n\n  window.addEventListener('testPassiveEventSupport', noop, options);\n  window.removeEventListener('testPassiveEventSupport', noop, options);\n  return passive;\n};\n\nfunction autoInc(seed) {\n  if (seed === void 0) {\n    seed = 0;\n  }\n\n  return function () {\n    return ++seed;\n  };\n}\n\nvar uid = autoInc();\n\nvar passiveEventSupport;\nvar handlersMap = {};\nvar enabledInstances = {};\nvar touchEvents = ['touchstart', 'touchmove'];\nvar IGNORE_CLASS_NAME = 'ignore-react-onclickoutside';\n/**\n * Options for addEventHandler and removeEventHandler\n */\n\nfunction getEventHandlerOptions(instance, eventName) {\n  var handlerOptions = null;\n  var isTouchEvent = touchEvents.indexOf(eventName) !== -1;\n\n  if (isTouchEvent && passiveEventSupport) {\n    handlerOptions = {\n      passive: !instance.props.preventDefault\n    };\n  }\n\n  return handlerOptions;\n}\n/**\n * This function generates the HOC function that you'll use\n * in order to impart onOutsideClick listening to an\n * arbitrary component. It gets called at the end of the\n * bootstrapping code to yield an instance of the\n * onClickOutsideHOC function defined inside setupHOC().\n */\n\n\nfunction onClickOutsideHOC(WrappedComponent, config) {\n  var _class, _temp;\n\n  return _temp = _class =\n  /*#__PURE__*/\n  function (_Component) {\n    _inheritsLoose(onClickOutside, _Component);\n\n    function onClickOutside(props) {\n      var _this;\n\n      _this = _Component.call(this, props) || this;\n\n      _this.__outsideClickHandler = function (event) {\n        if (typeof _this.__clickOutsideHandlerProp === 'function') {\n          _this.__clickOutsideHandlerProp(event);\n\n          return;\n        }\n\n        var instance = _this.getInstance();\n\n        if (typeof instance.props.handleClickOutside === 'function') {\n          instance.props.handleClickOutside(event);\n          return;\n        }\n\n        if (typeof instance.handleClickOutside === 'function') {\n          instance.handleClickOutside(event);\n          return;\n        }\n\n        throw new Error('WrappedComponent lacks a handleClickOutside(event) function for processing outside click events.');\n      };\n\n      _this.enableOnClickOutside = function () {\n        if (typeof document === 'undefined' || enabledInstances[_this._uid]) {\n          return;\n        }\n\n        if (typeof passiveEventSupport === 'undefined') {\n          passiveEventSupport = testPassiveEventSupport();\n        }\n\n        enabledInstances[_this._uid] = true;\n        var events = _this.props.eventTypes;\n\n        if (!events.forEach) {\n          events = [events];\n        }\n\n        handlersMap[_this._uid] = function (event) {\n          if (_this.props.disableOnClickOutside) return;\n          if (_this.componentNode === null) return;\n\n          if (_this.props.preventDefault) {\n            event.preventDefault();\n          }\n\n          if (_this.props.stopPropagation) {\n            event.stopPropagation();\n          }\n\n          if (_this.props.excludeScrollbar && clickedScrollbar(event)) return;\n          var current = event.target;\n\n          if (findHighest(current, _this.componentNode, _this.props.outsideClickIgnoreClass) !== document) {\n            return;\n          }\n\n          _this.__outsideClickHandler(event);\n        };\n\n        events.forEach(function (eventName) {\n          document.addEventListener(eventName, handlersMap[_this._uid], getEventHandlerOptions(_this, eventName));\n        });\n      };\n\n      _this.disableOnClickOutside = function () {\n        delete enabledInstances[_this._uid];\n        var fn = handlersMap[_this._uid];\n\n        if (fn && typeof document !== 'undefined') {\n          var events = _this.props.eventTypes;\n\n          if (!events.forEach) {\n            events = [events];\n          }\n\n          events.forEach(function (eventName) {\n            return document.removeEventListener(eventName, fn, getEventHandlerOptions(_this, eventName));\n          });\n          delete handlersMap[_this._uid];\n        }\n      };\n\n      _this.getRef = function (ref) {\n        return _this.instanceRef = ref;\n      };\n\n      _this._uid = uid();\n      return _this;\n    }\n    /**\n     * Access the WrappedComponent's instance.\n     */\n\n\n    var _proto = onClickOutside.prototype;\n\n    _proto.getInstance = function getInstance() {\n      if (!WrappedComponent.prototype.isReactComponent) {\n        return this;\n      }\n\n      var ref = this.instanceRef;\n      return ref.getInstance ? ref.getInstance() : ref;\n    };\n\n    /**\n     * Add click listeners to the current document,\n     * linked to this component's state.\n     */\n    _proto.componentDidMount = function componentDidMount() {\n      // If we are in an environment without a DOM such\n      // as shallow rendering or snapshots then we exit\n      // early to prevent any unhandled errors being thrown.\n      if (typeof document === 'undefined' || !document.createElement) {\n        return;\n      }\n\n      var instance = this.getInstance();\n\n      if (config && typeof config.handleClickOutside === 'function') {\n        this.__clickOutsideHandlerProp = config.handleClickOutside(instance);\n\n        if (typeof this.__clickOutsideHandlerProp !== 'function') {\n          throw new Error('WrappedComponent lacks a function for processing outside click events specified by the handleClickOutside config option.');\n        }\n      }\n\n      this.componentNode = findDOMNode(this.getInstance());\n      this.enableOnClickOutside();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      this.componentNode = findDOMNode(this.getInstance());\n    };\n    /**\n     * Remove all document's event listeners for this component\n     */\n\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.disableOnClickOutside();\n    };\n    /**\n     * Can be called to explicitly enable event listening\n     * for clicks and touches outside of this element.\n     */\n\n\n    /**\n     * Pass-through render\n     */\n    _proto.render = function render() {\n      // eslint-disable-next-line no-unused-vars\n      var _props = this.props,\n          excludeScrollbar = _props.excludeScrollbar,\n          props = _objectWithoutProperties(_props, [\"excludeScrollbar\"]);\n\n      if (WrappedComponent.prototype.isReactComponent) {\n        props.ref = this.getRef;\n      } else {\n        props.wrappedRef = this.getRef;\n      }\n\n      props.disableOnClickOutside = this.disableOnClickOutside;\n      props.enableOnClickOutside = this.enableOnClickOutside;\n      return createElement(WrappedComponent, props);\n    };\n\n    return onClickOutside;\n  }(Component), _class.displayName = \"OnClickOutside(\" + (WrappedComponent.displayName || WrappedComponent.name || 'Component') + \")\", _class.defaultProps = {\n    eventTypes: ['mousedown', 'touchstart'],\n    excludeScrollbar: config && config.excludeScrollbar || false,\n    outsideClickIgnoreClass: IGNORE_CLASS_NAME,\n    preventDefault: false,\n    stopPropagation: false\n  }, _class.getClass = function () {\n    return WrappedComponent.getClass ? WrappedComponent.getClass() : WrappedComponent;\n  }, _temp;\n}\n\nexport { IGNORE_CLASS_NAME };\nexport default onClickOutsideHOC;\n","import * as React from \"react\";\r\n\r\nexport interface CompletedTodoTitleProps {\r\n  title: string;\r\n  completionDate: Date;\r\n}\r\n\r\nexport class CompletedTodoTitle extends React.PureComponent<CompletedTodoTitleProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"todo-list-todo-title\">\r\n        {this.props.title}<br />\r\n        <small>Completed on {this.props.completionDate.toLocaleDateString()}</small>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoTitleProps {\r\n  title: string;\r\n}\r\n\r\nexport class TodoTitle extends React.PureComponent<TodoTitleProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"todo-list-todo-title\">{this.props.title}</div>\r\n    );\r\n  }\r\n}\r\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","import { Event, EventStore } from \"data/event-store\";\r\nimport { DomainEventTypeName, UncommittedDomainEvent } from \"domain/events\";\r\nimport { IndexedDBEventStore } from \"data/indexeddb-event-store\";\r\n\r\nconst db: EventStore<DomainEventTypeName> = new IndexedDBEventStore(\"much-done\", \"event\");\r\n\r\nexport async function todoListEvents(aggregateId: string): Promise<Event<DomainEventTypeName>[]> {\r\n    return await db.getEventsByAggregate(aggregateId);\r\n}\r\n\r\nexport async function todoListId(): Promise<string | null> {\r\n  // This app's domain and event-store are designed to accommodate multiple aggregates of different types.\r\n  // Currently, the app only has one aggregate type (TodoList) and only allows the user to have one instance of that aggregate.\r\n  // This method depends on that limitation. If multiple aggregates are implemented, this method will need\r\n  // some other way to get the todoListId.\r\n  let events = await db.getAllEvents();\r\n    let lists = todoListIds(events);\r\n    return (lists.length)\r\n        ? lists[0]\r\n        : null;\r\n}\r\n\r\nfunction todoListIds(events: Event<DomainEventTypeName>[]): string[] {\r\n    return events.reduce<string[]>((p, c) => {\r\n        if (c.type === DomainEventTypeName.TodoAdded && p.indexOf(c.aggregateId) === -1) {\r\n            p.push(c.aggregateId);\r\n        }\r\n        return p;\r\n    }, []);\r\n}\r\n\r\nexport async function addEvents(events: UncommittedDomainEvent[]): Promise<void> {\r\n    return await db.addEvents(events);\r\n}\r\n","import * as React from \"react\";\r\nimport OnClickOut, { InjectedOnClickOutProps } from \"react-onclickoutside\";\r\n\r\nexport interface TodoActionsPanelBtnGroupProps {\r\n  showDefaultPanel(): void;\r\n}\r\n\r\nclass TodoActionsPanelBtnGroupInner extends React.PureComponent<TodoActionsPanelBtnGroupProps & InjectedOnClickOutProps> {\r\n  handleClickOutside = () => {\r\n    this.props.showDefaultPanel();\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"todo-list-todo-btn-group\">\r\n        <div className=\"btn-group\" role=\"group\">\r\n          {this.props.children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const TodoActionsPanelBtnGroup = OnClickOut<TodoActionsPanelBtnGroupProps>(TodoActionsPanelBtnGroupInner);\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoDeleteBtnProps {\r\n  deleteTodo(): void;\r\n}\r\n\r\nexport class TodoDeleteBtn extends React.PureComponent<TodoDeleteBtnProps> {\r\n  render() {\r\n    return (\r\n      <button onClick={this.props.deleteTodo} type=\"button\" className=\"btn btn-link\" aria-label=\"Delete\">\r\n        <span className=\"glyphicon glyphicon-trash\" aria-hidden=\"true\" />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoRenameBtnProps {\r\n  showRenamePanel(): void;\r\n}\r\n\r\nexport class TodoRenameBtn extends React.PureComponent<TodoRenameBtnProps> {\r\n  render() {\r\n    return (\r\n      <button onClick={this.props.showRenamePanel} type=\"button\" className=\"btn btn-link\"  aria-label=\"Rename\">\r\n        <span className=\"glyphicon glyphicon-pencil\" aria-hidden=\"true\" />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoPanelBtnGroupProps {\r\n  showActionsPanel(): void;\r\n}\r\n\r\nexport class TodoPanelBtnGroup extends React.PureComponent<TodoPanelBtnGroupProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"todo-list-todo-btn-group\">\r\n        <button onClick={this.props.showActionsPanel} type=\"button\" className=\"btn btn-link\" aria-label=\"Actions\">\r\n          <span className=\"glyphicon glyphicon-cog\" aria-hidden=\"true\" />\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport OnClickOut, { InjectedOnClickOutProps } from \"react-onclickoutside\";\r\nimport { Todo } from \"domain/todo\";\r\n\r\nexport interface TodoRenameFormProps {\r\n  todo: Todo;\r\n  renameTodo(name: string): void;\r\n  showDefaultPanel(): void;\r\n}\r\n\r\ninterface TodoRenameFormState {\r\n  value: string;\r\n}\r\n\r\nclass TodoRenameFormInner extends React.PureComponent<TodoRenameFormProps & InjectedOnClickOutProps, TodoRenameFormState> {\r\n  constructor(props: TodoRenameFormProps & InjectedOnClickOutProps) {\r\n    super(props);\r\n    this.state = {\r\n      value: this.props.todo.name,\r\n    };\r\n  }\r\n  handleClickOutside = () => {\r\n    this.props.showDefaultPanel();\r\n  }\r\n  onChange: React.ChangeEventHandler<HTMLInputElement> = e => {\r\n    this.setState({ value: e.target.value });\r\n  }\r\n  onSubmit: React.FormEventHandler<HTMLFormElement> = e => {\r\n    e.preventDefault();\r\n    this.props.renameTodo(this.state.value);\r\n    this.props.showDefaultPanel();\r\n  }\r\n  render() {\r\n    let inputId = \"todoRenameInput-\" + this.props.todo.id;\r\n    return (\r\n      <form role=\"form\" onSubmit={this.onSubmit}>\r\n        <label htmlFor={inputId} className=\"sr-only\">New Name</label>\r\n        <div className=\"input-group\">\r\n          <input id={inputId} name=\"name\" type=\"text\" className=\"form-control\" onChange={this.onChange} value={this.state.value} required />\r\n          <span className=\"input-group-btn\">\r\n            <button type=\"submit\" className=\"btn btn-success\" aria-label=\"Rename To-do\">\r\n              <span className=\"glyphicon glyphicon-pencil\" aria-hidden=\"true\" />\r\n            </button>\r\n          </span>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport const TodoRenameForm = OnClickOut<TodoRenameFormProps>(TodoRenameFormInner);\r\n","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport { Body } from \"components/body\";\r\nimport { todoListId } from \"data\";\r\nimport \"styles.css\";\r\n\r\nif (!window.indexedDB) {\r\n  window.alert(\"Your browser doesn't support IndexedDB (the browser feature this app uses to store your To-dos). Update your browser to its latest version.\");\r\n}\r\n\r\ntodoListId()\r\n  .then(id => {\r\n    ReactDOM.render(\r\n      <Body todoListId={id} />,\r\n      document.getElementById(\"app\"),\r\n    );\r\n  }).catch(console.log);\r\n","import * as React from \"react\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { TodoIdType } from \"domain/todo\";\r\nimport { TodoList } from \"domain/todo-list\";\r\nimport { Event } from \"data/event-store\";\r\nimport { todoListEvents, addEvents } from \"data\";\r\nimport { EventList } from \"./event-list\";\r\nimport { EventListEmpty } from \"./event-list-empty\";\r\nimport { HistoryTodoListPanel } from \"./history-todo-list-panel\";\r\nimport { TodoListPanel } from \"./todo-list-panel\";\r\nimport { DomainEventTypeName } from \"domain/events\";\r\n\r\nexport interface BodyProps {\r\n  todoListId: string | null;\r\n}\r\n\r\ninterface BodyState {\r\n  todoListId: string | null;\r\n  events: Event<DomainEventTypeName>[];\r\n  history: boolean;\r\n  historyVersion: number;\r\n}\r\n\r\nexport class Body extends React.PureComponent<BodyProps, BodyState> {\r\n  constructor(props: BodyProps) {\r\n    super(props);\r\n    this.state = {\r\n      todoListId: props.todoListId,\r\n      events: [],\r\n      history: false,\r\n      historyVersion: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount(): void {\r\n    if (this.state.todoListId) {\r\n      todoListEvents(this.state.todoListId)\r\n        .then(events => { this.setState({ events }); })\r\n        .catch(console.log);\r\n    }\r\n  }\r\n  updateDomainTodoList = async (command: (todoList: TodoList) => void): Promise<void> => {\r\n    let events = (this.state.todoListId)\r\n      ? await todoListEvents(this.state.todoListId)\r\n      : [];\r\n    let todoList = new TodoList(events);\r\n    command(todoList);\r\n    await addEvents(todoList.uncommittedEvents);\r\n    this.setState({\r\n      todoListId: todoList.id,\r\n      events: await todoListEvents(todoList.id),\r\n    });\r\n  }\r\n  addTodo = (name: string) => {\r\n    this.updateDomainTodoList(list => { list.add(uuid(), name); })\r\n      .catch(console.log);\r\n  }\r\n  completeTodo = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.complete(id, Date.now()); })\r\n      .catch(console.log);\r\n  }\r\n  uncompleteTodo = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.uncomplete(id); })\r\n      .catch(console.log);\r\n  }\r\n  deleteTodo = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.remove(id); })\r\n      .catch(console.log);\r\n  }\r\n  moveTodoUp = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.changePosition(id, -1); })\r\n      .catch(console.log);\r\n  }\r\n  moveTodoDown = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.changePosition(id, 1); })\r\n      .catch(console.log);\r\n  }\r\n  renametodo = (id: TodoIdType, name: string) => {\r\n    this.updateDomainTodoList(list => { list.rename(id, name); })\r\n      .catch(console.log);\r\n  }\r\n  showHistoryVersion = (version: number) => {\r\n    this.setState({ history: true, historyVersion: version });\r\n  }\r\n  showCurrentVersion = () => {\r\n    todoListEvents(this.state.todoListId as string)\r\n      .then(events => { this.setState({ events, history: false, historyVersion: 0 }); })\r\n      .catch(console.log);\r\n  }\r\n  render() {\r\n    let todoList = new TodoList(\r\n      this.state.history\r\n        ? this.state.events.slice(0, this.state.historyVersion)\r\n        : this.state.events\r\n    );\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-sm-8\">\r\n            {this.state.history\r\n              ? <HistoryTodoListPanel\r\n                todos={todoList.todos}\r\n                completedTodos={todoList.completedTodos}\r\n              />\r\n              : <TodoListPanel\r\n                todos={todoList.todos}\r\n                completedTodos={todoList.completedTodos}\r\n                addTodo={this.addTodo}\r\n                completeTodo={this.completeTodo}\r\n                uncompleteTodo={this.uncompleteTodo}\r\n                deleteTodo={this.deleteTodo}\r\n                moveTodoUp={this.moveTodoUp}\r\n                moveTodoDown={this.moveTodoDown}\r\n                renameTodo={this.renametodo}\r\n              />\r\n            }\r\n          </div>\r\n          <div className=\"col-sm-4\">\r\n            <h3>Domain Events</h3>\r\n            {this.state.events.length\r\n              ? <EventList\r\n                disableOnClickOutside={!this.state.history}\r\n                events={this.state.events}\r\n                showHistoryVersion={this.showHistoryVersion}\r\n                showCurrentVersion={this.showCurrentVersion} />\r\n              : <EventListEmpty />}\r\n          </div>\r\n        </div>\r\n        <footer>\r\n          <p>&copy; 2017 - Jon Brian Skog</p>\r\n        </footer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import { v4 as uuid } from \"uuid\";\r\nimport { AggregateRoot } from \"./aggregate-root\";\r\nimport { TodoAdded, TodoCompleted, TodoPositionChanged, TodoRemoved, TodoRenamed, TodoUncompleted } from \"./events\";\r\nimport { CompletedTodo, Todo, TodoIdType } from \"./todo\";\r\n\r\nexport class TodoList extends AggregateRoot {\r\n    protected _todos!: (Todo | CompletedTodo)[];\r\n    get todos(): Todo[] {\r\n        return this._todos.filter(x => !x.isCompleted);\r\n    }\r\n    get completedTodos(): CompletedTodo[] {\r\n        return (this._todos.filter(x => x.isCompleted) as CompletedTodo[])\r\n            .sort((x, y) => y.completionTimestamp - x.completionTimestamp);\r\n    }\r\n    protected init(): void {\r\n        super.init();\r\n        this._todos = [];\r\n    }\r\n\r\n    // Domain Event Handlers\r\n    protected TodoAdded(e: TodoAdded): void {\r\n        if (!this.id) {\r\n            this._id = e.aggregateId;\r\n        }\r\n        this._todos.push(new Todo(e.todoId, e.todoName));\r\n    }\r\n    protected TodoRemoved(e: TodoRemoved): void {\r\n        let i = this._todos.findIndex(x => x.id === e.todoId);\r\n        if (i !== -1) {\r\n            this._todos.splice(i, 1);\r\n        }\r\n    }\r\n    protected TodoCompleted(e: TodoCompleted): void {\r\n        let i = this._todos.findIndex(x => x.id === e.todoId);\r\n        if (i !== -1) {\r\n            let oldTodo = this._todos[i];\r\n            let newTodo = new CompletedTodo(oldTodo.id, oldTodo.name, e.todoCompletionTimestamp);\r\n            this._todos[i] = newTodo;\r\n        }\r\n    }\r\n    protected TodoUncompleted(e: TodoUncompleted): void {\r\n        let i = this._todos.findIndex(x => x.id === e.todoId);\r\n        if (i !== -1) {\r\n            let oldTodo = this._todos[i];\r\n            let newTodo = new Todo(oldTodo.id, oldTodo.name);\r\n            this._todos[i] = newTodo;\r\n        }\r\n    }\r\n    protected TodoRenamed(e: TodoRenamed): void {\r\n        let todo = this._todos.find(x => x.id === e.todoId);\r\n        if (todo) {\r\n            todo.name = e.todoName;\r\n        }\r\n    }\r\n    protected TodoPositionChanged(e: TodoPositionChanged): void {\r\n        let incompleteTodoPositions: number[] = this._todos.reduce<number[]>((p, c, i) => {\r\n            if (!c.isCompleted) {\r\n                p.push(i);\r\n            }\r\n            return p;\r\n        }, []);\r\n        let from = incompleteTodoPositions.findIndex(x => this._todos[x].id === e.todoId);\r\n        if (from === -1) {\r\n            return;\r\n        }\r\n        let to = from + e.todoOffset;\r\n        if (to < 0) {\r\n            to = 0;\r\n        } else if (to > incompleteTodoPositions.length - 1) {\r\n            to = incompleteTodoPositions.length - 1;\r\n        }\r\n        if (from === to) {\r\n            return;\r\n        }\r\n        if (to < from) {\r\n            for (let i = to; i < from; i++) {\r\n                arraySwap(this._todos, incompleteTodoPositions[from], incompleteTodoPositions[i]);\r\n            }\r\n        } else {\r\n            for (let i = to; i > from; i--) {\r\n                arraySwap(this._todos, incompleteTodoPositions[from], incompleteTodoPositions[i]);\r\n            }\r\n        }\r\n        function arraySwap(arr: any[], x: number, y: number): void {\r\n            let a = arr[x];\r\n            arr[x] = arr[y];\r\n            arr[y] = a;\r\n        }\r\n    }\r\n\r\n    add(id: TodoIdType, name: string): void {\r\n        let agId = this.id || uuid();\r\n        this.applyAndStage(new TodoAdded(agId, id, name));\r\n    }\r\n    remove(id: TodoIdType): void {\r\n        this.applyAndStage(new TodoRemoved(this.id, id));\r\n    }\r\n    complete(id: TodoIdType, completionTimestamp: number): void {\r\n        this.applyAndStage(new TodoCompleted(this.id, id, completionTimestamp));\r\n    }\r\n    uncomplete(id: TodoIdType): void {\r\n        this.applyAndStage(new TodoUncompleted(this.id, id));\r\n    }\r\n    rename(id: TodoIdType, name: string): void {\r\n        this.applyAndStage(new TodoRenamed(this.id, id, name));\r\n    }\r\n    changePosition(id: TodoIdType, offset: number): void {\r\n        this.applyAndStage(new TodoPositionChanged(this.id, id, offset));\r\n    }\r\n}\r\n","import { DomainEventTypeName, UncommittedDomainEvent } from \"./events\";\r\n\r\nexport type DomainEventHandler = (e: UncommittedDomainEvent) => void;\r\n\r\nexport abstract class AggregateRoot {\r\n    [key: string]: any;\r\n    private _uncommittedEvents!: UncommittedDomainEvent[];\r\n    get uncommittedEvents(): UncommittedDomainEvent[] {\r\n        return this._uncommittedEvents;\r\n    }\r\n    protected _id!: string;\r\n    get id(): string {\r\n        return this._id;\r\n    }\r\n    protected init(): void {\r\n        this._uncommittedEvents = new Array<UncommittedDomainEvent>();\r\n    }\r\n    constructor(events: UncommittedDomainEvent[]) {\r\n        this.init();\r\n        for (const e of events) {\r\n            (this[DomainEventTypeName[e.type]] as DomainEventHandler)(e);\r\n        }\r\n    }\r\n    protected applyAndStage(e: UncommittedDomainEvent): void {\r\n        (this[DomainEventTypeName[e.type]] as DomainEventHandler)(e);\r\n        this._uncommittedEvents.push(e);\r\n    }\r\n}\r\n","export type TodoIdType = string;\r\n\r\nexport class Todo {\r\n    readonly isCompleted: boolean = false;\r\n    constructor(\r\n        readonly id: TodoIdType,\r\n        public name: string,\r\n    ) { }\r\n}\r\n\r\nexport class CompletedTodo extends Todo {\r\n    readonly isCompleted: boolean = true;\r\n    constructor(\r\n        id: TodoIdType,\r\n        name: string,\r\n        readonly completionTimestamp: number,\r\n    ) {\r\n        super(id, name);\r\n    }\r\n}\r\n","import idb, { Cursor, DB } from \"idb\";\r\nimport { Event, UncommittedEvent, EventStore } from \"./event-store\";\r\n\r\nconst aggregateIdPropName = \"aggregateId\";\r\nconst eventIdPropName = \"id\";\r\n\r\nexport class IndexedDBEventStore<T> implements EventStore<T> {\r\n  constructor(readonly dbName: string, readonly storeName: string) {}\r\n  protected async open(): Promise<DB> {\r\n    return await idb.open(this.dbName, 1, db => {\r\n      switch (db.oldVersion) {\r\n        case 0:\r\n          db.createObjectStore(this.storeName, { autoIncrement: true, keyPath: eventIdPropName })\r\n            .createIndex(aggregateIdPropName, aggregateIdPropName);\r\n      }\r\n    });\r\n  }\r\n  async getAllEvents(version?: number): Promise<Event<T>[]> {\r\n    let db = await this.open();\r\n    let events = [] as Event<T>[];\r\n    let tx = db.transaction(this.storeName);\r\n    let store = tx.objectStore(this.storeName);\r\n    function cursorCallback(cursor: Cursor<Event<T>, number>): void {\r\n      if (!cursor) {\r\n        return;\r\n      }\r\n      events.push(cursor.value);\r\n      // tslint:disable-next-line:no-floating-promises\r\n      cursor.continue();\r\n    }\r\n    // iterateCursor() should be replaced with usage of openCursor() when \"idb\" decides it is safe to do so.\r\n    if (version) {\r\n      store.iterateCursor(IDBKeyRange.upperBound(version), cursorCallback);\r\n    } else {\r\n      store.iterateCursor(cursorCallback);\r\n    }\r\n    await tx.complete;\r\n    return events;\r\n  }\r\n  async getEventsByAggregate(aggregateId: string, version?: number): Promise<Event<T>[]> {\r\n    let db = await this.open();\r\n    let events = [] as Event<T>[];\r\n    let tx = db.transaction(this.storeName);\r\n    let index = tx.objectStore(this.storeName).index(aggregateIdPropName);\r\n    function cursorCallback(cursor: Cursor<Event<T>, number>): void {\r\n      if (!cursor) {\r\n        return;\r\n      }\r\n      let event = cursor.value;\r\n      if (!version || event.id <= version) {\r\n        events.push(event);\r\n      }\r\n      // tslint:disable-next-line:no-floating-promises\r\n      cursor.continue();\r\n    }\r\n    // iterateCursor() should be replaced with usage of openCursor() when \"idb\" decides it is safe to do so.\r\n    index.iterateCursor(aggregateId, cursorCallback);\r\n    await tx.complete;\r\n    return events;\r\n  }\r\n  async addEvents(events: UncommittedEvent<T>[]): Promise<void> {\r\n    let db = await this.open();\r\n    let tx = db.transaction(this.storeName, \"readwrite\");\r\n    let store = tx.objectStore(this.storeName);\r\n    let addPromises = [];\r\n    for (const e of events) {\r\n      addPromises.push(store.add(e));\r\n    }\r\n    await Promise.all(addPromises);\r\n    await tx.complete;\r\n  }\r\n}","'use strict';\n\n(function() {\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function(resolve, reject) {\n      request.onsuccess = function() {\n        resolve(request.result);\n      };\n\n      request.onerror = function() {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function(resolve, reject) {\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function(value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function(prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function() {\n          return this[targetProp][prop];\n        },\n        set: function(val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', [\n    'name',\n    'keyPath',\n    'multiEntry',\n    'unique'\n  ]);\n\n  proxyRequestMethods(Index, '_index', IDBIndex, [\n    'get',\n    'getKey',\n    'getAll',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', [\n    'direction',\n    'key',\n    'primaryKey',\n    'value'\n  ]);\n\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, [\n    'update',\n    'delete'\n  ]);\n\n  // proxy 'next' methods\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function(methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n    Cursor.prototype[methodName] = function() {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function() {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n        return promisifyRequest(cursor._request).then(function(value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function() {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function() {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', [\n    'name',\n    'keyPath',\n    'indexNames',\n    'autoIncrement'\n  ]);\n\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'put',\n    'add',\n    'delete',\n    'clear',\n    'get',\n    'getAll',\n    'getKey',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, [\n    'deleteIndex'\n  ]);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function(resolve, reject) {\n      idbTransaction.oncomplete = function() {\n        resolve();\n      };\n      idbTransaction.onerror = function() {\n        reject(idbTransaction.error);\n      };\n      idbTransaction.onabort = function() {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function() {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', [\n    'objectStoreNames',\n    'mode'\n  ]);\n\n  proxyMethods(Transaction, '_tx', IDBTransaction, [\n    'abort'\n  ]);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function() {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, [\n    'deleteObjectStore',\n    'close'\n  ]);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function() {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(DB, '_db', IDBDatabase, [\n    'close'\n  ]);\n\n  // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n  ['openCursor', 'openKeyCursor'].forEach(function(funcName) {\n    [ObjectStore, Index].forEach(function(Constructor) {\n      // Don't create iterateKeyCursor if openKeyCursor doesn't exist.\n      if (!(funcName in Constructor.prototype)) return;\n\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function() {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n        request.onsuccess = function() {\n          callback(request.result);\n        };\n      };\n    });\n  });\n\n  // polyfill getAll\n  [Index, ObjectStore].forEach(function(Constructor) {\n    if (Constructor.prototype.getAll) return;\n    Constructor.prototype.getAll = function(query, count) {\n      var instance = this;\n      var items = [];\n\n      return new Promise(function(resolve) {\n        instance.iterateCursor(query, function(cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length == count) {\n            resolve(items);\n            return;\n          }\n          cursor.continue();\n        });\n      });\n    };\n  });\n\n  var exp = {\n    open: function(name, version, upgradeCallback) {\n      var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n      var request = p.request;\n\n      if (request) {\n        request.onupgradeneeded = function(event) {\n          if (upgradeCallback) {\n            upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n          }\n        };\n      }\n\n      return p.then(function(db) {\n        return new DB(db);\n      });\n    },\n    delete: function(name) {\n      return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n    }\n  };\n\n  if (typeof module !== 'undefined') {\n    module.exports = exp;\n    module.exports.default = module.exports;\n  }\n  else {\n    self.idb = exp;\n  }\n}());\n","import * as React from \"react\";\r\nimport OnClickOut, { InjectedOnClickOutProps } from \"react-onclickoutside\";\r\nimport { Event } from \"data/event-store\";\r\nimport { EventListItem } from \"./event-list/event-list-item\";\r\nimport { DomainEventTypeName } from \"domain/events\";\r\n\r\nexport interface EventListProps {\r\n  events: Event<DomainEventTypeName>[];\r\n  showHistoryVersion(version: number): void;\r\n  showCurrentVersion(): void;\r\n}\r\n\r\nexport class EventListInner extends React.PureComponent<EventListProps & InjectedOnClickOutProps> {\r\n  handleClickOutside = () => {\r\n    this.props.showCurrentVersion();\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.events.map(event =>\r\n          <EventListItem\r\n            key={event.id}\r\n            event={event}\r\n            showHistoryVersion={this.props.showHistoryVersion}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const EventList = OnClickOut<EventListProps>(EventListInner);\r\n","import * as React from \"react\";\r\nimport { Event } from \"data/event-store\";\r\nimport { DomainEventTypeName } from \"domain/events\";\r\n\r\nexport interface EventListItemProps {\r\n  event: Event<DomainEventTypeName>;\r\n  showHistoryVersion(version: number): void;\r\n}\r\n\r\nexport class EventListItem extends React.PureComponent<EventListItemProps> {\r\n  showHistory: React.MouseEventHandler<HTMLButtonElement> = e => {\r\n    this.props.showHistoryVersion(this.props.event.id);\r\n  }\r\n  render() {\r\n    return (\r\n      <button onClick={this.showHistory} className=\"list-group-item event-list-item\">{this.props.event.id} : {DomainEventTypeName[this.props.event.type]}</button>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport const EventListEmpty: React.SFC = () =>\r\n  <p><span className=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span> Add some to-dos to see events</p>;\r\n","import * as React from \"react\";\r\nimport { CompletedTodo, Todo } from \"domain/todo\";\r\nimport { HistoryCompletedTodoList } from \"./history-todo-list-panel/history-completed-todo-list\";\r\nimport { HistoryTodoList } from \"./history-todo-list-panel/history-todo-list\";\r\n\r\nexport interface HistoryTodoListPanelProps {\r\n  todos: Todo[];\r\n  completedTodos: CompletedTodo[];\r\n}\r\n\r\nexport class HistoryTodoListPanel extends React.PureComponent<HistoryTodoListPanelProps> {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h3 className=\"sr-only\">To-dos</h3>\r\n        <HistoryTodoList todos={this.props.todos} />\r\n        {this.props.completedTodos.length\r\n          ? <div>\r\n            <h3 className=\"sr-only\">Completed To-dos</h3>\r\n            <HistoryCompletedTodoList todos={this.props.completedTodos}\r\n            />\r\n          </div>\r\n          : null\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { CompletedTodo } from \"domain/todo\";\r\nimport { HistoryCompletedTodoListItem } from \"./history-completed-todo-list/history-completed-todo-list-item\";\r\n\r\nexport interface HistoryCompletedTodoListProps {\r\n  todos: CompletedTodo[];\r\n}\r\n\r\nexport class HistoryCompletedTodoList extends React.PureComponent<HistoryCompletedTodoListProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.todos.map(todo =>\r\n          <HistoryCompletedTodoListItem\r\n            key={todo.id}\r\n            todo={todo}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { CompletedTodo } from \"domain/todo\";\r\nimport { CompletedTodoTitle } from \"components/todo-list-panel/completed-todo-list/completed-todo-list-item/completed-todo-panel/completed-todo-title\";\r\n\r\nexport interface HistoryCompletedTodoListItemProps {\r\n  todo: CompletedTodo;\r\n}\r\n\r\nexport class HistoryCompletedTodoListItem extends React.PureComponent<HistoryCompletedTodoListItemProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item list-group-item-success\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <CompletedTodoTitle title={this.props.todo.name} completionDate={new Date(this.props.todo.completionTimestamp)} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo } from \"domain/todo\";\r\nimport { HistoryTodoListItem } from \"./history-todo-list/history-todo-list-item\";\r\n\r\nexport interface HistoryTodoListProps {\r\n  todos: Todo[];\r\n}\r\n\r\nexport class HistoryTodoList extends React.PureComponent<HistoryTodoListProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.todos.map(todo =>\r\n          <HistoryTodoListItem\r\n            key={todo.id}\r\n            todo={todo}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo } from \"domain/todo\";\r\nimport { TodoTitle } from \"components/todo-list-panel/todo-list/todo-list-item/todo-panel/todo-title\";\r\n\r\nexport interface HistoryTodoListItemProps {\r\n  todo: Todo;\r\n}\r\n\r\nexport class HistoryTodoListItem extends React.PureComponent<HistoryTodoListItemProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <TodoTitle title={this.props.todo.name} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { CompletedTodo, Todo, TodoIdType } from \"domain/todo\";\r\nimport { CompletedTodoList } from \"./todo-list-panel/completed-todo-list\";\r\nimport { TodoAddForm } from \"./todo-list-panel/todo-add-form\";\r\nimport { TodoList } from \"./todo-list-panel/todo-list\";\r\n\r\nexport interface TodoListPanelProps {\r\n  todos: Todo[];\r\n  completedTodos: CompletedTodo[];\r\n  addTodo(name: string): void;\r\n  completeTodo(id: TodoIdType): void;\r\n  uncompleteTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  moveTodoUp(id: TodoIdType): void;\r\n  moveTodoDown(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nexport class TodoListPanel extends React.PureComponent<TodoListPanelProps> {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <TodoAddForm addTodo={this.props.addTodo} />\r\n        <br />\r\n        <h3 className=\"sr-only\">To-dos</h3>\r\n        <TodoList\r\n          todos={this.props.todos}\r\n          completeTodo={this.props.completeTodo}\r\n          deleteTodo={this.props.deleteTodo}\r\n          moveTodoUp={this.props.moveTodoUp}\r\n          moveTodoDown={this.props.moveTodoDown}\r\n          renameTodo={this.props.renameTodo}\r\n        />\r\n        {this.props.completedTodos.length\r\n          ? <div>\r\n            <h3 className=\"sr-only\">Completed To-dos</h3>\r\n            <CompletedTodoList\r\n              todos={this.props.completedTodos}\r\n              uncompleteTodo={this.props.uncompleteTodo}\r\n              deleteTodo={this.props.deleteTodo}\r\n              renameTodo={this.props.renameTodo}\r\n            />\r\n          </div>\r\n          : null\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { CompletedTodo, TodoIdType } from \"domain/todo\";\r\nimport { CompletedTodoListItem } from \"./completed-todo-list/completed-todo-list-item\";\r\n\r\nexport interface CompletedTodoListProps {\r\n  todos: CompletedTodo[];\r\n  uncompleteTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nexport class CompletedTodoList extends React.PureComponent<CompletedTodoListProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.todos.map(todo =>\r\n          <CompletedTodoListItem\r\n            key={todo.id}\r\n            todo={todo}\r\n            uncompleteTodo={this.props.uncompleteTodo}\r\n            deleteTodo={this.props.deleteTodo}\r\n            renameTodo={this.props.renameTodo}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { CompletedTodo, TodoIdType } from \"domain/todo\";\r\nimport { CompletedTodoActionsPanel } from \"./completed-todo-list-item/completed-todo-actions-panel\";\r\nimport { CompletedTodoPanel } from \"./completed-todo-list-item/completed-todo-panel\";\r\nimport { CompletedTodoRenamePanel } from \"./completed-todo-list-item/completed-todo-rename-panel\";\r\n\r\nexport interface CompletedTodoListItemProps {\r\n  todo: CompletedTodo;\r\n  uncompleteTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nenum PanelType {\r\n  DefaultPanel,\r\n  ActionsPanel,\r\n  RenamePanel,\r\n}\r\n\r\ninterface CompletedTodoListItemState {\r\n  panel: PanelType;\r\n}\r\n\r\nexport class CompletedTodoListItem extends React.PureComponent<CompletedTodoListItemProps, CompletedTodoListItemState> {\r\n  constructor(props: CompletedTodoListItemProps) {\r\n    super(props);\r\n    this.state = {\r\n      panel: PanelType.DefaultPanel\r\n    };\r\n  }\r\n  uncompleteTodo = () => {\r\n    this.props.uncompleteTodo(this.props.todo.id);\r\n  }\r\n  deleteTodo = () => {\r\n    this.props.deleteTodo(this.props.todo.id);\r\n  }\r\n  renameTodo = (name: string) => {\r\n    this.props.renameTodo(this.props.todo.id, name);\r\n  }\r\n  showDefaultPanel = () => {\r\n    this.setState({\r\n      panel: PanelType.DefaultPanel\r\n    });\r\n  }\r\n  showActionsPanel = () => {\r\n    this.setState({\r\n      panel: PanelType.ActionsPanel\r\n    });\r\n  }\r\n  showRenamePanel = () => {\r\n    this.setState({\r\n      panel: PanelType.RenamePanel\r\n    });\r\n  }\r\n  render() {\r\n    let panel: JSX.Element | null;\r\n    switch (this.state.panel) {\r\n      case PanelType.DefaultPanel: {\r\n        panel =\r\n          <CompletedTodoPanel\r\n            todo={this.props.todo}\r\n            uncompleteTodo={this.uncompleteTodo}\r\n            showActionsPanel={this.showActionsPanel}\r\n          />;\r\n        break;\r\n      }\r\n      case PanelType.ActionsPanel: {\r\n        panel =\r\n          <CompletedTodoActionsPanel\r\n            todo={this.props.todo}\r\n            deleteTodo={this.deleteTodo}\r\n            showDefaultPanel={this.showDefaultPanel}\r\n            showRenamePanel={this.showRenamePanel}\r\n          />;\r\n        break;\r\n      }\r\n      case PanelType.RenamePanel: {\r\n        panel =\r\n          <CompletedTodoRenamePanel\r\n            todo={this.props.todo}\r\n            renameTodo={this.renameTodo}\r\n            showDefaultPanel={this.showDefaultPanel}\r\n          />;\r\n        break;\r\n      }\r\n      default: {\r\n        panel = null;\r\n        break;\r\n      }\r\n    }\r\n    return panel;\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { CompletedTodo } from \"domain/todo\";\r\nimport { CompletedTodoTitle } from \"./completed-todo-panel/completed-todo-title\";\r\nimport { TodoActionsPanelBtnGroup } from \"components/todo-list-panel/todo-list/todo-list-item/todo-actions-panel/todo-actions-panel-btn-group\";\r\nimport { TodoDeleteBtn } from \"components/todo-list-panel/todo-list/todo-list-item/todo-actions-panel/todo-delete-btn\";\r\nimport { TodoRenameBtn } from \"components/todo-list-panel/todo-list/todo-list-item/todo-actions-panel/todo-rename-btn\";\r\n\r\nexport interface CompletedTodoActionsPanelProps {\r\n  todo: CompletedTodo;\r\n  deleteTodo(): void;\r\n  showDefaultPanel(): void;\r\n  showRenamePanel(): void;\r\n}\r\n\r\nexport class CompletedTodoActionsPanel extends React.PureComponent<CompletedTodoActionsPanelProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item list-group-item-success\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <CompletedTodoTitle title={this.props.todo.name} completionDate={new Date(this.props.todo.completionTimestamp)} />\r\n          <TodoActionsPanelBtnGroup showDefaultPanel={this.props.showDefaultPanel}>\r\n            <TodoDeleteBtn deleteTodo={this.props.deleteTodo} />\r\n            <TodoRenameBtn showRenamePanel={this.props.showRenamePanel} />\r\n          </ TodoActionsPanelBtnGroup>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { findDOMNode } from \"react-dom\";\r\nimport { CompletedTodo } from \"domain/todo\";\r\nimport { CompletedTodoTitle } from \"./completed-todo-panel/completed-todo-title\";\r\nimport { TodoPanelBtnGroup } from \"components/todo-list-panel/todo-list/todo-list-item/todo-panel/todo-panel-btn-group\";\r\n\r\nexport interface CompletedTodoPanelProps {\r\n  todo: CompletedTodo;\r\n  uncompleteTodo(): void;\r\n  showActionsPanel(): void;\r\n}\r\n\r\nexport class CompletedTodoPanel extends React.PureComponent<CompletedTodoPanelProps> {\r\n  btnGroup!: HTMLElement;\r\n  btnGroupRef: React.Ref<TodoPanelBtnGroup> = comp => {\r\n    if (comp) {\r\n      this.btnGroup = findDOMNode(comp) as HTMLElement;\r\n    }\r\n  }\r\n  onClick: React.MouseEventHandler<HTMLAnchorElement> = e => {\r\n    if (!this.btnGroup.contains(e.target as HTMLElement)) {\r\n      this.props.uncompleteTodo();\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <a onClick={this.onClick} className=\"list-group-item list-group-item-success\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <CompletedTodoTitle title={this.props.todo.name} completionDate={new Date(this.props.todo.completionTimestamp)} />\r\n          <TodoPanelBtnGroup\r\n            ref={this.btnGroupRef}\r\n            showActionsPanel={this.props.showActionsPanel} />\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo } from \"domain/todo\";\r\nimport { TodoRenameForm } from \"components/todo-list-panel/todo-list/todo-list-item/todo-rename-panel/todo-rename-form\";\r\n\r\nexport interface CompletedTodoRenamePanelProps {\r\n  todo: Todo;\r\n  renameTodo(name: string): void;\r\n  showDefaultPanel(): void;\r\n}\r\n\r\nexport class CompletedTodoRenamePanel extends React.PureComponent<CompletedTodoRenamePanelProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item list-group-item-success\">\r\n        <TodoRenameForm {...this.props} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoAddFormProps {\r\n  addTodo(name: string): void;\r\n}\r\n\r\ninterface TodoAddFormState {\r\n  value: string;\r\n}\r\n\r\nexport class TodoAddForm extends React.PureComponent<TodoAddFormProps, TodoAddFormState> {\r\n  constructor(props: TodoAddFormProps) {\r\n    super(props);\r\n    this.state = {\r\n      value: \"\",\r\n    };\r\n  }\r\n  reset = () => {\r\n    this.setState({ value: \"\" });\r\n  }\r\n  onChange: React.ChangeEventHandler<HTMLInputElement> = e => {\r\n    this.setState({ value: e.target.value });\r\n  }\r\n  onSubmit: React.FormEventHandler<HTMLFormElement> = e => {\r\n    e.preventDefault();\r\n    this.props.addTodo(this.state.value);\r\n    this.reset();\r\n  }\r\n  render() {\r\n    let inputId = \"todoAddInput\";\r\n    return (\r\n      <form role=\"form\" onSubmit={this.onSubmit}>\r\n        <label htmlFor={inputId} className=\"sr-only\">New To-do Name</label>\r\n        <div className=\"input-group\">\r\n          <input id={inputId} name=\"name\" type=\"text\" className=\"form-control\" placeholder=\"What do you need to do?\" onChange={this.onChange} value={this.state.value} required />\r\n          <span className=\"input-group-btn\">\r\n            <button type=\"submit\" className=\"btn btn-success\" aria-label=\"Add To-do\">\r\n              <span className=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\r\n            </button>\r\n          </span>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo, TodoIdType } from \"domain/todo\";\r\nimport { TodoListItem } from \"./todo-list/todo-list-item\";\r\n\r\nexport interface TodoListProps {\r\n  todos: Todo[];\r\n  completeTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  moveTodoUp(id: TodoIdType): void;\r\n  moveTodoDown(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nexport class TodoList extends React.PureComponent<TodoListProps> {\r\n  movedTodoListItemRef!: React.RefObject<HTMLDivElement> | null;\r\n  movedTodoListItemOffsetTop!: number | null;\r\n  moveTodoUp = (id: TodoIdType, listItemRef: React.RefObject<HTMLDivElement>) => {\r\n    this.setMovedTodoRef(listItemRef);\r\n    this.props.moveTodoUp(id);\r\n  }\r\n  moveTodoDown = (id: TodoIdType, listItemRef: React.RefObject<HTMLDivElement>) => {\r\n    this.setMovedTodoRef(listItemRef);\r\n    this.props.moveTodoDown(id);\r\n  }\r\n  setMovedTodoRef = (listItemRef: React.RefObject<HTMLDivElement>) => {\r\n    this.movedTodoListItemOffsetTop = (listItemRef.current as HTMLDivElement).offsetTop;\r\n    this.movedTodoListItemRef = listItemRef;\r\n  }\r\n  componentDidUpdate() {\r\n    if (this.movedTodoListItemRef) {\r\n      window.scrollBy({\r\n        top: (this.movedTodoListItemRef.current as HTMLDivElement).offsetTop - (this.movedTodoListItemOffsetTop as number),\r\n        behavior: \"instant\",\r\n      });\r\n      this.movedTodoListItemRef = null;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.todos.map(todo =>\r\n          <TodoListItem\r\n            key={todo.id}\r\n            todo={todo}\r\n            completeTodo={this.props.completeTodo}\r\n            deleteTodo={this.props.deleteTodo}\r\n            moveTodoUp={this.moveTodoUp}\r\n            moveTodoDown={this.moveTodoDown}\r\n            renameTodo={this.props.renameTodo}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo, TodoIdType } from \"domain/todo\";\r\nimport { TodoActionsPanel } from \"./todo-list-item/todo-actions-panel\";\r\nimport { TodoPanel } from \"./todo-list-item/todo-panel\";\r\nimport { TodoRenamePanel } from \"./todo-list-item/todo-rename-panel\";\r\n\r\nexport interface TodoListItemProps {\r\n  todo: Todo;\r\n  completeTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  moveTodoUp(id: TodoIdType, listItemRef: React.RefObject<HTMLDivElement>): void;\r\n  moveTodoDown(id: TodoIdType, listItemRef: React.RefObject<HTMLDivElement>): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nenum PanelType {\r\n  DefaultPanel,\r\n  ActionsPanel,\r\n  RenamePanel,\r\n}\r\n\r\ninterface TodoListItemState {\r\n  panel: PanelType;\r\n}\r\n\r\nexport class TodoListItem extends React.PureComponent<TodoListItemProps, TodoListItemState> {\r\n  constructor(props: TodoListItemProps) {\r\n    super(props);\r\n    this.state = {\r\n      panel: PanelType.DefaultPanel\r\n    };\r\n  }\r\n  completeTodo = () => {\r\n    this.props.completeTodo(this.props.todo.id);\r\n  }\r\n  deleteTodo = () => {\r\n    this.props.deleteTodo(this.props.todo.id);\r\n  }\r\n  moveTodoUp = (listItemRef: React.RefObject<HTMLDivElement>) => {\r\n    this.props.moveTodoUp(this.props.todo.id, listItemRef);\r\n  }\r\n  moveTodoDown = (listItemRef: React.RefObject<HTMLDivElement>) => {\r\n    this.props.moveTodoDown(this.props.todo.id, listItemRef);\r\n  }\r\n  renameTodo = (name: string) => {\r\n    this.props.renameTodo(this.props.todo.id, name);\r\n  }\r\n  showDefaultPanel = () => {\r\n    this.setState({\r\n      panel: PanelType.DefaultPanel\r\n    });\r\n  }\r\n  showActionsPanel = () => {\r\n    this.setState({\r\n      panel: PanelType.ActionsPanel\r\n    });\r\n  }\r\n  showRenamePanel = () => {\r\n    this.setState({\r\n      panel: PanelType.RenamePanel\r\n    });\r\n  }\r\n  render() {\r\n    let panel: JSX.Element | null;\r\n    switch (this.state.panel) {\r\n      case PanelType.DefaultPanel: {\r\n        panel =\r\n          <TodoPanel\r\n            todo={this.props.todo}\r\n            completeTodo={this.completeTodo}\r\n            showActionsPanel={this.showActionsPanel}\r\n          />;\r\n        break;\r\n      }\r\n      case PanelType.ActionsPanel: {\r\n        panel =\r\n          <TodoActionsPanel\r\n            todo={this.props.todo}\r\n            deleteTodo={this.deleteTodo}\r\n            moveTodoUp={this.moveTodoUp}\r\n            moveTodoDown={this.moveTodoDown}\r\n            showDefaultPanel={this.showDefaultPanel}\r\n            showRenamePanel={this.showRenamePanel}\r\n          />;\r\n        break;\r\n      }\r\n      case PanelType.RenamePanel: {\r\n        panel =\r\n          <TodoRenamePanel\r\n            todo={this.props.todo}\r\n            renameTodo={this.renameTodo}\r\n            showDefaultPanel={this.showDefaultPanel}\r\n          />;\r\n        break;\r\n      }\r\n      default: {\r\n        panel = null;\r\n        break;\r\n      }\r\n    }\r\n    return panel;\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo } from \"domain/todo\";\r\nimport { TodoActionsPanelBtnGroup } from \"./todo-actions-panel/todo-actions-panel-btn-group\";\r\nimport { TodoDeleteBtn } from \"./todo-actions-panel/todo-delete-btn\";\r\nimport { TodoMoveDownBtn } from \"./todo-actions-panel/todo-move-down-btn\";\r\nimport { TodoMoveUpBtn } from \"./todo-actions-panel/todo-move-up-btn\";\r\nimport { TodoRenameBtn } from \"./todo-actions-panel/todo-rename-btn\";\r\nimport { TodoTitle } from \"./todo-panel/todo-title\";\r\n\r\nexport interface TodoActionsPanelProps {\r\n  todo: Todo;\r\n  deleteTodo(): void;\r\n  moveTodoUp(listItemRef: React.RefObject<HTMLDivElement>): void;\r\n  moveTodoDown(listItemRef: React.RefObject<HTMLDivElement>): void;\r\n  showDefaultPanel(): void;\r\n  showRenamePanel(): void;\r\n}\r\n\r\nexport class TodoActionsPanel extends React.PureComponent<TodoActionsPanelProps> {\r\n  listItemRef: React.RefObject<HTMLDivElement>;\r\n  constructor(props: TodoActionsPanelProps) {\r\n    super(props);\r\n    this.listItemRef = React.createRef();\r\n  }\r\n  moveTodoUp = () => {\r\n    this.props.moveTodoUp(this.listItemRef);\r\n  }\r\n  moveTodoDown = () => {\r\n    this.props.moveTodoDown(this.listItemRef);\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item\" ref={this.listItemRef}>\r\n        <div className=\"todo-list-todo-panel\">\r\n          <TodoTitle title={this.props.todo.name} />\r\n          <TodoActionsPanelBtnGroup showDefaultPanel={this.props.showDefaultPanel}>\r\n            <TodoDeleteBtn deleteTodo={this.props.deleteTodo} />\r\n            <TodoMoveUpBtn moveTodoUp={this.moveTodoUp} />\r\n            <TodoMoveDownBtn moveTodoDown={this.moveTodoDown} />\r\n            <TodoRenameBtn showRenamePanel={this.props.showRenamePanel} />\r\n          </TodoActionsPanelBtnGroup>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoMoveDownBtnProps {\r\n  moveTodoDown(): void;\r\n}\r\n\r\nexport class TodoMoveDownBtn extends React.PureComponent<TodoMoveDownBtnProps> {\r\n  render() {\r\n    return (\r\n      <button onClick={this.props.moveTodoDown} type=\"button\" className=\"btn btn-link\" aria-label=\"Move down\">\r\n        <span className=\"glyphicon glyphicon-chevron-down\" aria-hidden=\"true\" />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoMoveUpBtnProps {\r\n  moveTodoUp(): void;\r\n}\r\n\r\nexport class TodoMoveUpBtn extends React.PureComponent<TodoMoveUpBtnProps> {\r\n  render() {\r\n    return (\r\n      <button onClick={this.props.moveTodoUp} type=\"button\" className=\"btn btn-link\" aria-label=\"Move up\">\r\n        <span className=\"glyphicon glyphicon-chevron-up\" aria-hidden=\"true\" />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { findDOMNode } from \"react-dom\";\r\nimport { Todo } from \"domain/todo\";\r\nimport { TodoPanelBtnGroup } from \"./todo-panel/todo-panel-btn-group\";\r\nimport { TodoTitle } from \"./todo-panel/todo-title\";\r\n\r\nexport interface TodoPanelProps {\r\n  todo: Todo;\r\n  completeTodo(): void;\r\n  showActionsPanel(): void;\r\n}\r\n\r\nexport class TodoPanel extends React.PureComponent<TodoPanelProps> {\r\n  btnGroup!: HTMLElement;\r\n  btnGroupRef: React.Ref<TodoPanelBtnGroup> = comp => {\r\n    if (comp) {\r\n      this.btnGroup = findDOMNode(comp) as HTMLElement;\r\n    }\r\n  }\r\n  onClick: React.MouseEventHandler<HTMLAnchorElement> = e => {\r\n    if (!this.btnGroup.contains(e.target as HTMLElement)) {\r\n      this.props.completeTodo();\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <a onClick={this.onClick} className=\"list-group-item\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <TodoTitle title={this.props.todo.name} />\r\n          <TodoPanelBtnGroup\r\n            ref={this.btnGroupRef}\r\n            showActionsPanel={this.props.showActionsPanel} />\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo } from \"domain/todo\";\r\nimport { TodoRenameForm } from \"./todo-rename-panel/todo-rename-form\";\r\n\r\nexport interface TodoRenamePanelProps {\r\n  todo: Todo;\r\n  renameTodo(name: string): void;\r\n  showDefaultPanel(): void;\r\n}\r\n\r\nexport class TodoRenamePanel extends React.PureComponent<TodoRenamePanelProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item\">\r\n        <TodoRenameForm {...this.props} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}