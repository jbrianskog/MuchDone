!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=15)}([function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},function(e,t,o){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.TodoAdded=0]="TodoAdded",e[e.TodoRemoved=1]="TodoRemoved",e[e.TodoCompleted=2]="TodoCompleted",e[e.TodoUncompleted=3]="TodoUncompleted",e[e.TodoRenamed=4]="TodoRenamed",e[e.TodoPositionChanged=5]="TodoPositionChanged"}(n=t.DomainEventTypeName||(t.DomainEventTypeName={}));t.TodoAdded=class{constructor(e,t,o){this.aggregateId=e,this.todoId=t,this.todoName=o,this.type=n.TodoAdded}};t.TodoRemoved=class{constructor(e,t){this.aggregateId=e,this.todoId=t,this.type=n.TodoRemoved}};t.TodoCompleted=class{constructor(e,t,o){this.aggregateId=e,this.todoId=t,this.todoCompletionTimestamp=o,this.type=n.TodoCompleted}};t.TodoUncompleted=class{constructor(e,t){this.aggregateId=e,this.todoId=t,this.type=n.TodoUncompleted}};t.TodoRenamed=class{constructor(e,t,o){this.aggregateId=e,this.todoId=t,this.todoName=o,this.type=n.TodoRenamed}};t.TodoPositionChanged=class{constructor(e,t,o){this.aggregateId=e,this.todoId=t,this.todoOffset=o,this.type=n.TodoPositionChanged}}},function(e,t,o){"use strict";o.r(t),o.d(t,"IGNORE_CLASS_NAME",function(){return p});var n=o(0),s=o(1);function i(e,t,o){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(o):e.classList.contains(o))}var r=function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),o=function(){};return window.addEventListener("testPassiveEventSupport",o,t),window.removeEventListener("testPassiveEventSupport",o,t),e}};var d,a=function(e){return void 0===e&&(e=0),function(){return++e}}(),l={},c={},u=["touchstart","touchmove"],p="ignore-react-onclickoutside";function m(e,t){var o=null;return-1!==u.indexOf(t)&&d&&(o={passive:!e.props.preventDefault}),o}t.default=function(e,t){var o,u;return u=o=function(o){function u(e){var t;return(t=o.call(this,e)||this).__outsideClickHandler=function(e){if("function"!=typeof t.__clickOutsideHandlerProp){var o=t.getInstance();if("function"!=typeof o.props.handleClickOutside){if("function"!=typeof o.handleClickOutside)throw new Error("WrappedComponent lacks a handleClickOutside(event) function for processing outside click events.");o.handleClickOutside(e)}else o.props.handleClickOutside(e)}else t.__clickOutsideHandlerProp(e)},t.enableOnClickOutside=function(){if("undefined"!=typeof document&&!c[t._uid]){void 0===d&&(d=r()),c[t._uid]=!0;var e=t.props.eventTypes;e.forEach||(e=[e]),l[t._uid]=function(e){t.props.disableOnClickOutside||null!==t.componentNode&&(t.props.preventDefault&&e.preventDefault(),t.props.stopPropagation&&e.stopPropagation(),t.props.excludeScrollbar&&function(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY}(e)||function(e,t,o){if(e===t)return!0;for(;e.parentNode;){if(i(e,t,o))return!0;e=e.parentNode}return e}(e.target,t.componentNode,t.props.outsideClickIgnoreClass)===document&&t.__outsideClickHandler(e))},e.forEach(function(e){document.addEventListener(e,l[t._uid],m(t,e))})}},t.disableOnClickOutside=function(){delete c[t._uid];var e=l[t._uid];if(e&&"undefined"!=typeof document){var o=t.props.eventTypes;o.forEach||(o=[o]),o.forEach(function(o){return document.removeEventListener(o,e,m(t,o))}),delete l[t._uid]}},t.getRef=function(e){return t.instanceRef=e},t._uid=a(),t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(u,o);var p=u.prototype;return p.getInstance=function(){if(!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},p.componentDidMount=function(){if("undefined"!=typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"==typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!=typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=Object(s.findDOMNode)(this.getInstance()),this.enableOnClickOutside()}},p.componentDidUpdate=function(){this.componentNode=Object(s.findDOMNode)(this.getInstance())},p.componentWillUnmount=function(){this.disableOnClickOutside()},p.render=function(){var t=this.props,o=(t.excludeScrollbar,function(e,t){if(null==e)return{};var o,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||(s[o]=e[o]);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(s[o]=e[o])}return s}(t,["excludeScrollbar"]));return e.prototype.isReactComponent?o.ref=this.getRef:o.wrappedRef=this.getRef,o.disableOnClickOutside=this.disableOnClickOutside,o.enableOnClickOutside=this.enableOnClickOutside,Object(n.createElement)(e,o)},u}(n.Component),o.displayName="OnClickOutside("+(e.displayName||e.name||"Component")+")",o.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:p,preventDefault:!1,stopPropagation:!1},o.getClass=function(){return e.getClass?e.getClass():e},u}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.CompletedTodoTitle=class extends n.PureComponent{render(){return n.createElement("div",{className:"todo-list-todo-title"},this.props.title,n.createElement("br",null),n.createElement("small",null,"Completed on ",this.props.completionDate.toLocaleDateString()))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.TodoTitle=class extends n.PureComponent{render(){return n.createElement("div",{className:"todo-list-todo-title"},this.props.title)}}},function(e,t,o){var n=o(17),s=o(18),i=s;i.v1=n,i.v4=s,e.exports=i},function(e,t){var o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(o){var n=new Uint8Array(16);e.exports=function(){return o(n),n}}else{var s=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},function(e,t){for(var o=[],n=0;n<256;++n)o[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,s=o;return[s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]]].join("")}},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(s,i){function r(e){try{a(n.next(e))}catch(e){i(e)}}function d(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?s(e.value):new o(function(t){t(e.value)}).then(r,d)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=o(2),i=new(o(22).IndexedDBEventStore)("much-done","event");t.todoListEvents=function(e){return n(this,void 0,void 0,function*(){return yield i.getEventsByAggregate(e)})},t.todoListId=function(){return n(this,void 0,void 0,function*(){let e=function(e){return e.reduce((e,t)=>(t.type===s.DomainEventTypeName.TodoAdded&&-1===e.indexOf(t.aggregateId)&&e.push(t.aggregateId),e),[])}(yield i.getAllEvents());return e.length?e[0]:null})},t.addEvents=function(e){return n(this,void 0,void 0,function*(){return yield i.addEvents(e)})}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(3);t.TodoActionsPanelBtnGroup=s.default(class extends n.PureComponent{constructor(){super(...arguments),this.handleClickOutside=(()=>{this.props.showDefaultPanel()})}render(){return n.createElement("div",{className:"todo-list-todo-btn-group"},n.createElement("div",{className:"btn-group",role:"group"},this.props.children))}})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.TodoDeleteBtn=class extends n.PureComponent{render(){return n.createElement("button",{onClick:this.props.deleteTodo,type:"button",className:"btn btn-link","aria-label":"Delete"},n.createElement("span",{className:"glyphicon glyphicon-trash","aria-hidden":"true"}))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.TodoRenameBtn=class extends n.PureComponent{render(){return n.createElement("button",{onClick:this.props.showRenamePanel,type:"button",className:"btn btn-link","aria-label":"Rename"},n.createElement("span",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"}))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.TodoPanelBtnGroup=class extends n.PureComponent{render(){return n.createElement("div",{className:"todo-list-todo-btn-group"},n.createElement("button",{onClick:this.props.showActionsPanel,type:"button",className:"btn btn-link","aria-label":"Actions"},n.createElement("span",{className:"glyphicon glyphicon-cog","aria-hidden":"true"})))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(3);t.TodoRenameForm=s.default(class extends n.PureComponent{constructor(e){super(e),this.handleClickOutside=(()=>{this.props.showDefaultPanel()}),this.onChange=(e=>{this.setState({value:e.target.value})}),this.onSubmit=(e=>{e.preventDefault(),this.props.renameTodo(this.state.value),this.props.showDefaultPanel()}),this.state={value:this.props.todo.name}}render(){let e="todoRenameInput-"+this.props.todo.id;return n.createElement("form",{role:"form",onSubmit:this.onSubmit},n.createElement("label",{htmlFor:e,className:"sr-only"},"New Name"),n.createElement("div",{className:"input-group"},n.createElement("input",{id:e,name:"name",type:"text",className:"form-control",onChange:this.onChange,value:this.state.value,required:!0}),n.createElement("span",{className:"input-group-btn"},n.createElement("button",{type:"submit",className:"btn btn-success","aria-label":"Rename To-do"},n.createElement("span",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"})))))}})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(1),i=o(16),r=o(9);o(46),window.indexedDB||window.alert("Your browser doesn't support IndexedDB (the browser feature this app uses to store your To-dos). Update your browser to its latest version."),r.todoListId().then(e=>{s.render(n.createElement(i.Body,{todoListId:e}),document.getElementById("app"))}).catch(console.log)},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(s,i){function r(e){try{a(n.next(e))}catch(e){i(e)}}function d(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?s(e.value):new o(function(t){t(e.value)}).then(r,d)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=o(0),i=o(6),r=o(19),d=o(9),a=o(24),l=o(26),c=o(27),u=o(32);t.Body=class extends s.PureComponent{constructor(e){super(e),this.updateDomainTodoList=(e=>n(this,void 0,void 0,function*(){let t=this.state.todoListId?yield d.todoListEvents(this.state.todoListId):[],o=new r.TodoList(t);e(o),yield d.addEvents(o.uncommittedEvents),this.setState({todoListId:o.id,events:yield d.todoListEvents(o.id)})})),this.addTodo=(e=>{this.updateDomainTodoList(t=>{t.add(i.v4(),e)}).catch(console.log)}),this.completeTodo=(e=>{this.updateDomainTodoList(t=>{t.complete(e,Date.now())}).catch(console.log)}),this.uncompleteTodo=(e=>{this.updateDomainTodoList(t=>{t.uncomplete(e)}).catch(console.log)}),this.deleteTodo=(e=>{this.updateDomainTodoList(t=>{t.remove(e)}).catch(console.log)}),this.moveTodoUp=(e=>{this.updateDomainTodoList(t=>{t.changePosition(e,-1)}).catch(console.log)}),this.moveTodoDown=(e=>{this.updateDomainTodoList(t=>{t.changePosition(e,1)}).catch(console.log)}),this.renametodo=((e,t)=>{this.updateDomainTodoList(o=>{o.rename(e,t)}).catch(console.log)}),this.showHistoryVersion=(e=>{this.setState({history:!0,historyVersion:e})}),this.showCurrentVersion=(()=>{d.todoListEvents(this.state.todoListId).then(e=>{this.setState({events:e,history:!1,historyVersion:0})}).catch(console.log)}),this.state={todoListId:e.todoListId,events:[],history:!1,historyVersion:0}}componentDidMount(){this.state.todoListId&&d.todoListEvents(this.state.todoListId).then(e=>{this.setState({events:e})}).catch(console.log)}render(){let e=new r.TodoList(this.state.history?this.state.events.slice(0,this.state.historyVersion):this.state.events);return s.createElement("div",{className:"container"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-8"},this.state.history?s.createElement(c.HistoryTodoListPanel,{todos:e.todos,completedTodos:e.completedTodos}):s.createElement(u.TodoListPanel,{todos:e.todos,completedTodos:e.completedTodos,addTodo:this.addTodo,completeTodo:this.completeTodo,uncompleteTodo:this.uncompleteTodo,deleteTodo:this.deleteTodo,moveTodoUp:this.moveTodoUp,moveTodoDown:this.moveTodoDown,renameTodo:this.renametodo})),s.createElement("div",{className:"col-sm-4"},s.createElement("h3",null,"Domain Events"),this.state.events.length?s.createElement(a.EventList,{disableOnClickOutside:!this.state.history,events:this.state.events,showHistoryVersion:this.showHistoryVersion,showCurrentVersion:this.showCurrentVersion}):s.createElement(l.EventListEmpty,null))),s.createElement("footer",null,s.createElement("p",null,"Â© 2017 - Jon Brian Skog")))}}},function(e,t,o){var n,s,i=o(7),r=o(8),d=0,a=0;e.exports=function(e,t,o){var l=t&&o||0,c=t||[],u=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:s;if(null==u||null==p){var m=i();null==u&&(u=n=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==p&&(p=s=16383&(m[6]<<8|m[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:a+1,v=h-d+(f-a)/1e4;if(v<0&&void 0===e.clockseq&&(p=p+1&16383),(v<0||h>d)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=h,a=f,s=p;var T=(1e4*(268435455&(h+=122192928e5))+f)%4294967296;c[l++]=T>>>24&255,c[l++]=T>>>16&255,c[l++]=T>>>8&255,c[l++]=255&T;var y=h/4294967296*1e4&268435455;c[l++]=y>>>8&255,c[l++]=255&y,c[l++]=y>>>24&15|16,c[l++]=y>>>16&255,c[l++]=p>>>8|128,c[l++]=255&p;for(var g=0;g<6;++g)c[l+g]=u[g];return t||r(c)}},function(e,t,o){var n=o(7),s=o(8);e.exports=function(e,t,o){var i=t&&o||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||n)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var d=0;d<16;++d)t[i+d]=r[d];return t||s(r)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(6),s=o(20),i=o(2),r=o(21);t.TodoList=class extends s.AggregateRoot{get todos(){return this._todos.filter(e=>!e.isCompleted)}get completedTodos(){return this._todos.filter(e=>e.isCompleted).sort((e,t)=>t.completionTimestamp-e.completionTimestamp)}init(){super.init(),this._todos=[]}TodoAdded(e){this.id||(this._id=e.aggregateId),this._todos.push(new r.Todo(e.todoId,e.todoName))}TodoRemoved(e){let t=this._todos.findIndex(t=>t.id===e.todoId);-1!==t&&this._todos.splice(t,1)}TodoCompleted(e){let t=this._todos.findIndex(t=>t.id===e.todoId);if(-1!==t){let o=this._todos[t],n=new r.CompletedTodo(o.id,o.name,e.todoCompletionTimestamp);this._todos[t]=n}}TodoUncompleted(e){let t=this._todos.findIndex(t=>t.id===e.todoId);if(-1!==t){let e=this._todos[t],o=new r.Todo(e.id,e.name);this._todos[t]=o}}TodoRenamed(e){let t=this._todos.find(t=>t.id===e.todoId);t&&(t.name=e.todoName)}TodoPositionChanged(e){let t=this._todos.reduce((e,t,o)=>(t.isCompleted||e.push(o),e),[]),o=t.findIndex(t=>this._todos[t].id===e.todoId);if(-1===o)return;let n=o+e.todoOffset;if(n<0?n=0:n>t.length-1&&(n=t.length-1),o!==n)if(n<o)for(let e=n;e<o;e++)s(this._todos,t[o],t[e]);else for(let e=n;e>o;e--)s(this._todos,t[o],t[e]);function s(e,t,o){let n=e[t];e[t]=e[o],e[o]=n}}add(e,t){let o=this.id||n.v4();this.applyAndStage(new i.TodoAdded(o,e,t))}remove(e){this.applyAndStage(new i.TodoRemoved(this.id,e))}complete(e,t){this.applyAndStage(new i.TodoCompleted(this.id,e,t))}uncomplete(e){this.applyAndStage(new i.TodoUncompleted(this.id,e))}rename(e,t){this.applyAndStage(new i.TodoRenamed(this.id,e,t))}changePosition(e,t){this.applyAndStage(new i.TodoPositionChanged(this.id,e,t))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(2);t.AggregateRoot=class{get uncommittedEvents(){return this._uncommittedEvents}get id(){return this._id}init(){this._uncommittedEvents=new Array}constructor(e){this.init();for(const t of e)this[n.DomainEventTypeName[t.type]](t)}applyAndStage(e){this[n.DomainEventTypeName[e.type]](e),this._uncommittedEvents.push(e)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t){this.id=e,this.name=t,this.isCompleted=!1}}t.Todo=n;t.CompletedTodo=class extends n{constructor(e,t,o){super(e,t),this.completionTimestamp=o,this.isCompleted=!0}}},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(s,i){function r(e){try{a(n.next(e))}catch(e){i(e)}}function d(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?s(e.value):new o(function(t){t(e.value)}).then(r,d)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=o(23),i="aggregateId",r="id";t.IndexedDBEventStore=class{constructor(e,t){this.dbName=e,this.storeName=t}open(){return n(this,void 0,void 0,function*(){return yield s.default.open(this.dbName,1,e=>{switch(e.oldVersion){case 0:e.createObjectStore(this.storeName,{autoIncrement:!0,keyPath:r}).createIndex(i,i)}})})}getAllEvents(e){return n(this,void 0,void 0,function*(){let t=[],o=(yield this.open()).transaction(this.storeName),n=o.objectStore(this.storeName);function s(e){e&&(t.push(e.value),e.continue())}return e?n.iterateCursor(IDBKeyRange.upperBound(e),s):n.iterateCursor(s),yield o.complete,t})}getEventsByAggregate(e,t){return n(this,void 0,void 0,function*(){let o=[],n=(yield this.open()).transaction(this.storeName);return n.objectStore(this.storeName).index(i).iterateCursor(e,function(e){if(!e)return;let n=e.value;(!t||n.id<=t)&&o.push(n),e.continue()}),yield n.complete,o})}addEvents(e){return n(this,void 0,void 0,function*(){let t=(yield this.open()).transaction(this.storeName,"readwrite"),o=t.objectStore(this.storeName),n=[];for(const t of e)n.push(o.add(t));yield Promise.all(n),yield t.complete})}}},function(e,t,o){"use strict";!function(){function t(e){return new Promise(function(t,o){e.onsuccess=function(){t(e.result)},e.onerror=function(){o(e.error)}})}function o(e,o,n){var s,i=new Promise(function(i,r){t(s=e[o].apply(e,n)).then(i,r)});return i.request=s,i}function n(e,t,o){o.forEach(function(o){Object.defineProperty(e.prototype,o,{get:function(){return this[t][o]},set:function(e){this[t][o]=e}})})}function s(e,t,n,s){s.forEach(function(s){s in n.prototype&&(e.prototype[s]=function(){return o(this[t],s,arguments)})})}function i(e,t,o,n){n.forEach(function(n){n in o.prototype&&(e.prototype[n]=function(){return this[t][n].apply(this[t],arguments)})})}function r(e,t,n,s){s.forEach(function(s){s in n.prototype&&(e.prototype[s]=function(){return function(e,t,n){var s=o(e,t,n);return s.then(function(e){if(e)return new a(e,s.request)})}(this[t],s,arguments)})})}function d(e){this._index=e}function a(e,t){this._cursor=e,this._request=t}function l(e){this._store=e}function c(e){this._tx=e,this.complete=new Promise(function(t,o){e.oncomplete=function(){t()},e.onerror=function(){o(e.error)},e.onabort=function(){o(e.error)}})}function u(e,t,o){this._db=e,this.oldVersion=t,this.transaction=new c(o)}function p(e){this._db=e}n(d,"_index",["name","keyPath","multiEntry","unique"]),s(d,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),r(d,"_index",IDBIndex,["openCursor","openKeyCursor"]),n(a,"_cursor",["direction","key","primaryKey","value"]),s(a,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(a.prototype[e]=function(){var o=this,n=arguments;return Promise.resolve().then(function(){return o._cursor[e].apply(o._cursor,n),t(o._request).then(function(e){if(e)return new a(e,o._request)})})})}),l.prototype.createIndex=function(){return new d(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new d(this._store.index.apply(this._store,arguments))},n(l,"_store",["name","keyPath","indexNames","autoIncrement"]),s(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),r(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),i(l,"_store",IDBObjectStore,["deleteIndex"]),c.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},n(c,"_tx",["objectStoreNames","mode"]),i(c,"_tx",IDBTransaction,["abort"]),u.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},n(u,"_db",["name","version","objectStoreNames"]),i(u,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new c(this._db.transaction.apply(this._db,arguments))},n(p,"_db",["name","version","objectStoreNames"]),i(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[l,d].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t=function(e){return Array.prototype.slice.call(e)}(arguments),o=t[t.length-1],n=this._store||this._index,s=n[e].apply(n,t.slice(0,-1));s.onsuccess=function(){o(s.result)}})})}),[d,l].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var o=this,n=[];return new Promise(function(s){o.iterateCursor(e,function(e){e?(n.push(e.value),void 0===t||n.length!=t?e.continue():s(n)):s(n)})})})});var m={open:function(e,t,n){var s=o(indexedDB,"open",[e,t]),i=s.request;return i&&(i.onupgradeneeded=function(e){n&&n(new u(i.result,e.oldVersion,i.transaction))}),s.then(function(e){return new p(e)})},delete:function(e){return o(indexedDB,"deleteDatabase",[e])}};e.exports=m,e.exports.default=e.exports}()},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(3),i=o(25);class r extends n.PureComponent{constructor(){super(...arguments),this.handleClickOutside=(()=>{this.props.showCurrentVersion()})}render(){return n.createElement("div",{className:"list-group"},this.props.events.map(e=>n.createElement(i.EventListItem,{key:e.id,event:e,showHistoryVersion:this.props.showHistoryVersion})))}}t.EventListInner=r,t.EventList=s.default(r)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(2);t.EventListItem=class extends n.PureComponent{constructor(){super(...arguments),this.showHistory=(e=>{this.props.showHistoryVersion(this.props.event.id)})}render(){return n.createElement("button",{onClick:this.showHistory,className:"list-group-item event-list-item"},this.props.event.id," : ",s.DomainEventTypeName[this.props.event.type])}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.EventListEmpty=(()=>n.createElement("p",null,n.createElement("span",{className:"glyphicon glyphicon-exclamation-sign","aria-hidden":"true"})," Add some to-dos to see events"))},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(28),i=o(30);t.HistoryTodoListPanel=class extends n.PureComponent{render(){return n.createElement("div",null,n.createElement("h3",{className:"sr-only"},"To-dos"),n.createElement(i.HistoryTodoList,{todos:this.props.todos}),this.props.completedTodos.length?n.createElement("div",null,n.createElement("h3",{className:"sr-only"},"Completed To-dos"),n.createElement(s.HistoryCompletedTodoList,{todos:this.props.completedTodos})):null)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(29);t.HistoryCompletedTodoList=class extends n.PureComponent{render(){return n.createElement("div",{className:"list-group"},this.props.todos.map(e=>n.createElement(s.HistoryCompletedTodoListItem,{key:e.id,todo:e})))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(4);t.HistoryCompletedTodoListItem=class extends n.PureComponent{render(){return n.createElement("div",{className:"list-group-item list-group-item-success"},n.createElement("div",{className:"todo-list-todo-panel"},n.createElement(s.CompletedTodoTitle,{title:this.props.todo.name,completionDate:new Date(this.props.todo.completionTimestamp)})))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(31);t.HistoryTodoList=class extends n.PureComponent{render(){return n.createElement("div",{className:"list-group"},this.props.todos.map(e=>n.createElement(s.HistoryTodoListItem,{key:e.id,todo:e})))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(5);t.HistoryTodoListItem=class extends n.PureComponent{render(){return n.createElement("div",{className:"list-group-item"},n.createElement("div",{className:"todo-list-todo-panel"},n.createElement(s.TodoTitle,{title:this.props.todo.name})))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(33),i=o(38),r=o(39);t.TodoListPanel=class extends n.PureComponent{render(){return n.createElement("div",null,n.createElement(i.TodoAddForm,{addTodo:this.props.addTodo}),n.createElement("br",null),n.createElement("h3",{className:"sr-only"},"To-dos"),n.createElement(r.TodoList,{todos:this.props.todos,completeTodo:this.props.completeTodo,deleteTodo:this.props.deleteTodo,moveTodoUp:this.props.moveTodoUp,moveTodoDown:this.props.moveTodoDown,renameTodo:this.props.renameTodo}),this.props.completedTodos.length?n.createElement("div",null,n.createElement("h3",{className:"sr-only"},"Completed To-dos"),n.createElement(s.CompletedTodoList,{todos:this.props.completedTodos,uncompleteTodo:this.props.uncompleteTodo,deleteTodo:this.props.deleteTodo,renameTodo:this.props.renameTodo})):null)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(34);t.CompletedTodoList=class extends n.PureComponent{render(){return n.createElement("div",{className:"list-group"},this.props.todos.map(e=>n.createElement(s.CompletedTodoListItem,{key:e.id,todo:e,uncompleteTodo:this.props.uncompleteTodo,deleteTodo:this.props.deleteTodo,renameTodo:this.props.renameTodo})))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(35),i=o(36),r=o(37);var d;!function(e){e[e.DefaultPanel=0]="DefaultPanel",e[e.ActionsPanel=1]="ActionsPanel",e[e.RenamePanel=2]="RenamePanel"}(d||(d={}));t.CompletedTodoListItem=class extends n.PureComponent{constructor(e){super(e),this.uncompleteTodo=(()=>{this.props.uncompleteTodo(this.props.todo.id)}),this.deleteTodo=(()=>{this.props.deleteTodo(this.props.todo.id)}),this.renameTodo=(e=>{this.props.renameTodo(this.props.todo.id,e)}),this.showDefaultPanel=(()=>{this.setState({panel:d.DefaultPanel})}),this.showActionsPanel=(()=>{this.setState({panel:d.ActionsPanel})}),this.showRenamePanel=(()=>{this.setState({panel:d.RenamePanel})}),this.state={panel:d.DefaultPanel}}render(){let e;switch(this.state.panel){case d.DefaultPanel:e=n.createElement(i.CompletedTodoPanel,{todo:this.props.todo,uncompleteTodo:this.uncompleteTodo,showActionsPanel:this.showActionsPanel});break;case d.ActionsPanel:e=n.createElement(s.CompletedTodoActionsPanel,{todo:this.props.todo,deleteTodo:this.deleteTodo,showDefaultPanel:this.showDefaultPanel,showRenamePanel:this.showRenamePanel});break;case d.RenamePanel:e=n.createElement(r.CompletedTodoRenamePanel,{todo:this.props.todo,renameTodo:this.renameTodo,showDefaultPanel:this.showDefaultPanel});break;default:e=null}return e}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(4),i=o(10),r=o(11),d=o(12);t.CompletedTodoActionsPanel=class extends n.PureComponent{render(){return n.createElement("div",{className:"list-group-item list-group-item-success"},n.createElement("div",{className:"todo-list-todo-panel"},n.createElement(s.CompletedTodoTitle,{title:this.props.todo.name,completionDate:new Date(this.props.todo.completionTimestamp)}),n.createElement(i.TodoActionsPanelBtnGroup,{showDefaultPanel:this.props.showDefaultPanel},n.createElement(r.TodoDeleteBtn,{deleteTodo:this.props.deleteTodo}),n.createElement(d.TodoRenameBtn,{showRenamePanel:this.props.showRenamePanel}))))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(1),i=o(4),r=o(13);t.CompletedTodoPanel=class extends n.PureComponent{constructor(){super(...arguments),this.btnGroupRef=(e=>{e&&(this.btnGroup=s.findDOMNode(e))}),this.onClick=(e=>{this.btnGroup.contains(e.target)||this.props.uncompleteTodo()})}render(){return n.createElement("a",{onClick:this.onClick,className:"list-group-item list-group-item-success"},n.createElement("div",{className:"todo-list-todo-panel"},n.createElement(i.CompletedTodoTitle,{title:this.props.todo.name,completionDate:new Date(this.props.todo.completionTimestamp)}),n.createElement(r.TodoPanelBtnGroup,{ref:this.btnGroupRef,showActionsPanel:this.props.showActionsPanel})))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(14);t.CompletedTodoRenamePanel=class extends n.PureComponent{render(){return n.createElement("div",{className:"list-group-item list-group-item-success"},n.createElement(s.TodoRenameForm,Object.assign({},this.props)))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.TodoAddForm=class extends n.PureComponent{constructor(e){super(e),this.reset=(()=>{this.setState({value:""})}),this.onChange=(e=>{this.setState({value:e.target.value})}),this.onSubmit=(e=>{e.preventDefault(),this.props.addTodo(this.state.value),this.reset()}),this.state={value:""}}render(){return n.createElement("form",{role:"form",onSubmit:this.onSubmit},n.createElement("label",{htmlFor:"todoAddInput",className:"sr-only"},"New To-do Name"),n.createElement("div",{className:"input-group"},n.createElement("input",{id:"todoAddInput",name:"name",type:"text",className:"form-control",placeholder:"What do you need to do?",onChange:this.onChange,value:this.state.value,required:!0}),n.createElement("span",{className:"input-group-btn"},n.createElement("button",{type:"submit",className:"btn btn-success","aria-label":"Add To-do"},n.createElement("span",{className:"glyphicon glyphicon-plus","aria-hidden":"true"})))))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(40);t.TodoList=class extends n.PureComponent{constructor(){super(...arguments),this.moveTodoUp=((e,t)=>{this.setMovedTodoRef(t),this.props.moveTodoUp(e)}),this.moveTodoDown=((e,t)=>{this.setMovedTodoRef(t),this.props.moveTodoDown(e)}),this.setMovedTodoRef=(e=>{this.movedTodoListItemOffsetTop=e.current.offsetTop,this.movedTodoListItemRef=e})}componentDidUpdate(){this.movedTodoListItemRef&&(window.scrollBy({top:this.movedTodoListItemRef.current.offsetTop-this.movedTodoListItemOffsetTop,behavior:"instant"}),this.movedTodoListItemRef=null)}render(){return n.createElement("div",{className:"list-group"},this.props.todos.map(e=>n.createElement(s.TodoListItem,{key:e.id,todo:e,completeTodo:this.props.completeTodo,deleteTodo:this.props.deleteTodo,moveTodoUp:this.moveTodoUp,moveTodoDown:this.moveTodoDown,renameTodo:this.props.renameTodo})))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(41),i=o(44),r=o(45);var d;!function(e){e[e.DefaultPanel=0]="DefaultPanel",e[e.ActionsPanel=1]="ActionsPanel",e[e.RenamePanel=2]="RenamePanel"}(d||(d={}));t.TodoListItem=class extends n.PureComponent{constructor(e){super(e),this.completeTodo=(()=>{this.props.completeTodo(this.props.todo.id)}),this.deleteTodo=(()=>{this.props.deleteTodo(this.props.todo.id)}),this.moveTodoUp=(e=>{this.props.moveTodoUp(this.props.todo.id,e)}),this.moveTodoDown=(e=>{this.props.moveTodoDown(this.props.todo.id,e)}),this.renameTodo=(e=>{this.props.renameTodo(this.props.todo.id,e)}),this.showDefaultPanel=(()=>{this.setState({panel:d.DefaultPanel})}),this.showActionsPanel=(()=>{this.setState({panel:d.ActionsPanel})}),this.showRenamePanel=(()=>{this.setState({panel:d.RenamePanel})}),this.state={panel:d.DefaultPanel}}render(){let e;switch(this.state.panel){case d.DefaultPanel:e=n.createElement(i.TodoPanel,{todo:this.props.todo,completeTodo:this.completeTodo,showActionsPanel:this.showActionsPanel});break;case d.ActionsPanel:e=n.createElement(s.TodoActionsPanel,{todo:this.props.todo,deleteTodo:this.deleteTodo,moveTodoUp:this.moveTodoUp,moveTodoDown:this.moveTodoDown,showDefaultPanel:this.showDefaultPanel,showRenamePanel:this.showRenamePanel});break;case d.RenamePanel:e=n.createElement(r.TodoRenamePanel,{todo:this.props.todo,renameTodo:this.renameTodo,showDefaultPanel:this.showDefaultPanel});break;default:e=null}return e}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(10),i=o(11),r=o(42),d=o(43),a=o(12),l=o(5);t.TodoActionsPanel=class extends n.PureComponent{constructor(e){super(e),this.moveTodoUp=(()=>{this.props.moveTodoUp(this.listItemRef)}),this.moveTodoDown=(()=>{this.props.moveTodoDown(this.listItemRef)}),this.listItemRef=n.createRef()}render(){return n.createElement("div",{className:"list-group-item",ref:this.listItemRef},n.createElement("div",{className:"todo-list-todo-panel"},n.createElement(l.TodoTitle,{title:this.props.todo.name}),n.createElement(s.TodoActionsPanelBtnGroup,{showDefaultPanel:this.props.showDefaultPanel},n.createElement(i.TodoDeleteBtn,{deleteTodo:this.props.deleteTodo}),n.createElement(d.TodoMoveUpBtn,{moveTodoUp:this.moveTodoUp}),n.createElement(r.TodoMoveDownBtn,{moveTodoDown:this.moveTodoDown}),n.createElement(a.TodoRenameBtn,{showRenamePanel:this.props.showRenamePanel}))))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.TodoMoveDownBtn=class extends n.PureComponent{render(){return n.createElement("button",{onClick:this.props.moveTodoDown,type:"button",className:"btn btn-link","aria-label":"Move down"},n.createElement("span",{className:"glyphicon glyphicon-chevron-down","aria-hidden":"true"}))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.TodoMoveUpBtn=class extends n.PureComponent{render(){return n.createElement("button",{onClick:this.props.moveTodoUp,type:"button",className:"btn btn-link","aria-label":"Move up"},n.createElement("span",{className:"glyphicon glyphicon-chevron-up","aria-hidden":"true"}))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(1),i=o(13),r=o(5);t.TodoPanel=class extends n.PureComponent{constructor(){super(...arguments),this.btnGroupRef=(e=>{e&&(this.btnGroup=s.findDOMNode(e))}),this.onClick=(e=>{this.btnGroup.contains(e.target)||this.props.completeTodo()})}render(){return n.createElement("a",{onClick:this.onClick,className:"list-group-item"},n.createElement("div",{className:"todo-list-todo-panel"},n.createElement(r.TodoTitle,{title:this.props.todo.name}),n.createElement(i.TodoPanelBtnGroup,{ref:this.btnGroupRef,showActionsPanel:this.props.showActionsPanel})))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(14);t.TodoRenamePanel=class extends n.PureComponent{render(){return n.createElement("div",{className:"list-group-item"},n.createElement(s.TodoRenameForm,Object.assign({},this.props)))}}},function(e,t,o){}]);
//# sourceMappingURL=scripts.8b32918d249acc857840.js.map