{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"React\"","webpack:///external \"ReactDOM\"","webpack:///./event-store.ts","webpack:///../node_modules/react-onclickoutside/dist/react-onclickoutside.es.js","webpack:///./components/completed-todo-title.tsx","webpack:///./components/todo-title.tsx","webpack:///../node_modules/uuid/index.js","webpack:///../node_modules/uuid/lib/rng-browser.js","webpack:///../node_modules/uuid/lib/bytesToUuid.js","webpack:///./read.ts","webpack:///./components/todo-actions-panel-btn-group.tsx","webpack:///./components/todo-delete-btn.tsx","webpack:///./components/todo-rename-btn.tsx","webpack:///./components/todo-panel-btn-group.tsx","webpack:///./components/todo-rename-form.tsx","webpack:///./app.tsx","webpack:///./components/body.tsx","webpack:///../node_modules/uuid/v1.js","webpack:///../node_modules/uuid/v4.js","webpack:///./domain/todo-list.ts","webpack:///./domain/aggregate-root.ts","webpack:///../node_modules/idb/lib/idb.js","webpack:///./domain/events.ts","webpack:///./domain/todo.ts","webpack:///./components/event-list.tsx","webpack:///./components/event-list-item.tsx","webpack:///./components/event-list-empty.tsx","webpack:///./components/history-todo-list-panel.tsx","webpack:///./components/history-completed-todo-list.tsx","webpack:///./components/history-completed-todo-list-item.tsx","webpack:///./components/history-todo-list.tsx","webpack:///./components/history-todo-list-item.tsx","webpack:///./components/todo-list-panel.tsx","webpack:///./components/completed-todo-list.tsx","webpack:///./components/completed-todo-list-item.tsx","webpack:///./components/completed-todo-actions-panel.tsx","webpack:///./components/completed-todo-panel.tsx","webpack:///./components/completed-todo-rename-panel.tsx","webpack:///./components/todo-add-form.tsx","webpack:///./components/todo-list.tsx","webpack:///./components/todo-list-item.tsx","webpack:///./components/todo-actions-panel.tsx","webpack:///./components/todo-move-down-btn.tsx","webpack:///./components/todo-move-up-btn.tsx","webpack:///./components/todo-panel.tsx","webpack:///./components/todo-rename-panel.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","React","ReactDOM","idb_1","DomainEventType","dbName","domainEventStoreName","aggregateIdPropName","eventIdPropName","open","default","db","oldVersion","createObjectStore","autoIncrement","keyPath","createIndex","allDomainEvents","version","events","tx","transaction","store","objectStore","cursorCallback","cursor","push","continue","iterateCursor","IDBKeyRange","upperBound","complete","domainEventsByAggregate","aggregateId","index","event","id","postDomainEvents","addPromises","e","add","Promise","all","__webpack_exports__","IGNORE_CLASS_NAME","react__WEBPACK_IMPORTED_MODULE_0__","react_dom__WEBPACK_IMPORTED_MODULE_1__","isNodeFound","current","componentNode","ignoreClass","correspondingElement","classList","contains","testPassiveEventSupport","window","addEventListener","passive","options","noop","removeEventListener","passiveEventSupport","uid","seed","autoInc","handlersMap","enabledInstances","touchEvents","getEventHandlerOptions","instance","eventName","handlerOptions","indexOf","props","preventDefault","WrappedComponent","config","_class","_temp","_Component","onClickOutside","_this","this","__outsideClickHandler","__clickOutsideHandlerProp","getInstance","handleClickOutside","Error","enableOnClickOutside","document","_uid","eventTypes","forEach","disableOnClickOutside","stopPropagation","excludeScrollbar","evt","documentElement","clientWidth","clientX","clientHeight","clientY","clickedScrollbar","parentNode","findHighest","target","outsideClickIgnoreClass","fn","getRef","ref","instanceRef","subClass","superClass","constructor","__proto__","_inheritsLoose","_proto","isReactComponent","componentDidMount","createElement","componentDidUpdate","componentWillUnmount","render","_props","source","excluded","sourceKeys","keys","length","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_objectWithoutProperties","wrappedRef","displayName","defaultProps","getClass","CompletedTodoTitle","PureComponent","[object Object]","className","title","completionDate","toLocaleDateString","TodoTitle","v1","v4","uuid","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","rnds","Array","Math","random","byteToHex","toString","substr","buf","offset","bth","join","event_store_1","todoLists","reduce","type","TodoAdded","todoListEvents","lists","todoListId","react_onclickoutside_1","TodoActionsPanelBtnGroup","showDefaultPanel","role","children","TodoDeleteBtn","onClick","deleteTodo","aria-label","aria-hidden","TodoRenameBtn","showRenamePanel","TodoPanelBtnGroup","showActionsPanel","TodoRenameForm","super","onChange","setState","onSubmit","renameTodo","state","todo","inputId","htmlFor","required","body_1","read_1","indexedDB","alert","then","Body","getElementById","catch","console","log","uuid_1","todo_list_1","event_list_1","event_list_empty_1","history_todo_list_panel_1","todo_list_panel_1","updateDomainTodoList","command","__awaiter","todoList","TodoList","uncommittedEvents","addTodo","list","completeTodo","Date","now","uncompleteTodo","uncomplete","remove","moveTodoUp","changePosition","moveTodoDown","renametodo","rename","showHistoryVersion","history","historyVersion","showCurrentVersion","slice","HistoryTodoListPanel","todos","completedTodos","TodoListPanel","EventList","EventListEmpty","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","b","node","clockseq","undefined","seedBytes","msecs","getTime","nsecs","dt","tl","tmh","ii","aggregate_root_1","events_1","todo_1","AggregateRoot","_todos","filter","x","isCompleted","sort","y","completionTimestamp","init","_id","Todo","todoId","todoName","findIndex","splice","oldTodo","newTodo","CompletedTodo","todoCompletionTimestamp","find","incompleteTodoPositions","from","to","todoOffset","arraySwap","arr","a","agId","applyAndStage","TodoRemoved","TodoCompleted","TodoUncompleted","TodoRenamed","TodoPositionChanged","_uncommittedEvents","promisifyRequest","request","resolve","reject","onsuccess","result","onerror","error","promisifyRequestCall","obj","method","args","apply","proxyProperties","ProxyClass","targetProp","properties","prop","set","val","proxyRequestMethods","Constructor","arguments","proxyMethods","proxyCursorRequestMethods","Cursor","promisifyCursorRequestCall","Index","_index","_cursor","_request","ObjectStore","_store","Transaction","idbTransaction","_tx","oncomplete","onabort","UpgradeDB","_db","DB","IDBIndex","IDBCursor","methodName","IDBObjectStore","IDBTransaction","IDBDatabase","funcName","replace","toArray","callback","nativeObject","getAll","query","count","items","exp","upgradeCallback","onupgradeneeded","delete","event_list_item_1","EventListInner","map","EventListItem","showHistory","history_completed_todo_list_1","history_todo_list_1","HistoryTodoList","HistoryCompletedTodoList","history_completed_todo_list_item_1","HistoryCompletedTodoListItem","completed_todo_title_1","history_todo_list_item_1","HistoryTodoListItem","todo_title_1","completed_todo_list_1","todo_add_form_1","TodoAddForm","CompletedTodoList","completed_todo_list_item_1","CompletedTodoListItem","completed_todo_actions_panel_1","completed_todo_panel_1","completed_todo_rename_panel_1","PanelType","panel","DefaultPanel","ActionsPanel","RenamePanel","CompletedTodoPanel","CompletedTodoActionsPanel","CompletedTodoRenamePanel","todo_actions_panel_btn_group_1","todo_delete_btn_1","todo_rename_btn_1","react_dom_1","todo_panel_btn_group_1","btnGroupRef","comp","btnGroup","findDOMNode","todo_rename_form_1","assign","reset","placeholder","todo_list_item_1","TodoListItem","todo_actions_panel_1","todo_panel_1","todo_rename_panel_1","TodoPanel","TodoActionsPanel","TodoRenamePanel","todo_move_down_btn_1","todo_move_up_btn_1","TodoMoveUpBtn","TodoMoveDownBtn"],"mappings":"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","file":"scripts.785ee4765af551f8b0c1.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","module.exports = React;","module.exports = ReactDOM;","import idb, { Cursor, DB } from \"idb\";\r\n\r\nexport enum DomainEventType {\r\n    TodoAdded,\r\n    TodoRemoved,\r\n    TodoCompleted,\r\n    TodoUncompleted,\r\n    TodoRenamed,\r\n    TodoPositionChanged,\r\n}\r\nexport type AggregateIdType = string;\r\nexport interface UncommittedDomainEvent {\r\n    readonly aggregateId: AggregateIdType;\r\n    readonly type: DomainEventType;\r\n}\r\nexport interface DomainEvent extends UncommittedDomainEvent {\r\n    readonly id: number;\r\n}\r\nexport interface EventStore {\r\n    getAllDomainEvents(version?: number): Promise<DomainEvent[]>;\r\n    getDomainEventsByAggregate(aggregateId: AggregateIdType, version?: number): Promise<DomainEvent[]>;\r\n    postDomainEvents(events: UncommittedDomainEvent[]): Promise<void>;\r\n}\r\n\r\nconst dbName = \"estd-db\";\r\nconst domainEventStoreName = \"domain-event\";\r\nconst aggregateIdPropName = \"aggregateId\";\r\nconst eventIdPropName = \"id\";\r\n\r\nasync function open(): Promise<DB> {\r\n    return await idb.open(dbName, 1, db => {\r\n        switch (db.oldVersion) {\r\n            case 0:\r\n                db.createObjectStore(domainEventStoreName, { autoIncrement: true, keyPath: eventIdPropName })\r\n                    .createIndex(aggregateIdPropName, aggregateIdPropName);\r\n        }\r\n    });\r\n}\r\nexport async function allDomainEvents(version?: number): Promise<DomainEvent[]> {\r\n    let db = await open();\r\n    let events = [] as DomainEvent[];\r\n    let tx = db.transaction(domainEventStoreName);\r\n    let store = tx.objectStore(domainEventStoreName);\r\n    function cursorCallback(cursor: Cursor<DomainEvent, Number>): void {\r\n        if (!cursor) {\r\n            return;\r\n        }\r\n        events.push(cursor.value);\r\n        // tslint:disable-next-line:no-floating-promises\r\n        cursor.continue();\r\n    }\r\n    // iterateCursor() should be replaced with usage of openCursor() when \"idb\" decides it is safe to do so.\r\n    if (version) {\r\n        store.iterateCursor(IDBKeyRange.upperBound(version), cursorCallback);\r\n    } else {\r\n        store.iterateCursor(cursorCallback);\r\n    }\r\n    await tx.complete;\r\n    return events;\r\n}\r\nexport async function domainEventsByAggregate(aggregateId: AggregateIdType, version?: number): Promise<DomainEvent[]> {\r\n    let db = await open();\r\n    let events = [] as DomainEvent[];\r\n    let tx = db.transaction(domainEventStoreName);\r\n    let index = tx.objectStore(domainEventStoreName).index(aggregateIdPropName);\r\n    function cursorCallback(cursor: Cursor<DomainEvent, Number>): void {\r\n        if (!cursor) {\r\n            return;\r\n        }\r\n        let event = cursor.value;\r\n        if (!version || event.id <= version) {\r\n            events.push(event);\r\n        }\r\n        // tslint:disable-next-line:no-floating-promises\r\n        cursor.continue();\r\n    }\r\n    // iterateCursor() should be replaced with usage of openCursor() when \"idb\" decides it is safe to do so.\r\n    index.iterateCursor(aggregateId, cursorCallback);\r\n    await tx.complete;\r\n    return events;\r\n}\r\nexport async function postDomainEvents(events: UncommittedDomainEvent[]): Promise<void> {\r\n    let db = await open();\r\n    let tx = db.transaction(domainEventStoreName, \"readwrite\");\r\n    let store = tx.objectStore(domainEventStoreName);\r\n    let addPromises = [];\r\n    for (const e of events) {\r\n        addPromises.push(store.add(e));\r\n    }\r\n    await Promise.all(addPromises);\r\n    await tx.complete;\r\n}\r\n","import { Component, createElement } from 'react';\nimport { findDOMNode } from 'react-dom';\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n/**\n * Check whether some DOM node is our Component's node.\n */\nfunction isNodeFound(current, componentNode, ignoreClass) {\n  if (current === componentNode) {\n    return true;\n  } // SVG <use/> elements do not technically reside in the rendered DOM, so\n  // they do not have classList directly, but they offer a link to their\n  // corresponding element, which can have classList. This extra check is for\n  // that case.\n  // See: http://www.w3.org/TR/SVG11/struct.html#InterfaceSVGUseElement\n  // Discussion: https://github.com/Pomax/react-onclickoutside/pull/17\n\n\n  if (current.correspondingElement) {\n    return current.correspondingElement.classList.contains(ignoreClass);\n  }\n\n  return current.classList.contains(ignoreClass);\n}\n/**\n * Try to find our node in a hierarchy of nodes, returning the document\n * node as highest node if our node is not found in the path up.\n */\n\nfunction findHighest(current, componentNode, ignoreClass) {\n  if (current === componentNode) {\n    return true;\n  } // If source=local then this event came from 'somewhere'\n  // inside and should be ignored. We could handle this with\n  // a layered approach, too, but that requires going back to\n  // thinking in terms of Dom node nesting, running counter\n  // to React's 'you shouldn't care about the DOM' philosophy.\n\n\n  while (current.parentNode) {\n    if (isNodeFound(current, componentNode, ignoreClass)) {\n      return true;\n    }\n\n    current = current.parentNode;\n  }\n\n  return current;\n}\n/**\n * Check if the browser scrollbar was clicked\n */\n\nfunction clickedScrollbar(evt) {\n  return document.documentElement.clientWidth <= evt.clientX || document.documentElement.clientHeight <= evt.clientY;\n}\n\n// ideally will get replaced with external dep\n// when rafrex/detect-passive-events#4 and rafrex/detect-passive-events#5 get merged in\nvar testPassiveEventSupport = function testPassiveEventSupport() {\n  if (typeof window === 'undefined' || typeof window.addEventListener !== 'function') {\n    return;\n  }\n\n  var passive = false;\n  var options = Object.defineProperty({}, 'passive', {\n    get: function get() {\n      passive = true;\n    }\n  });\n\n  var noop = function noop() {};\n\n  window.addEventListener('testPassiveEventSupport', noop, options);\n  window.removeEventListener('testPassiveEventSupport', noop, options);\n  return passive;\n};\n\nfunction autoInc(seed) {\n  if (seed === void 0) {\n    seed = 0;\n  }\n\n  return function () {\n    return ++seed;\n  };\n}\n\nvar uid = autoInc();\n\nvar passiveEventSupport;\nvar handlersMap = {};\nvar enabledInstances = {};\nvar touchEvents = ['touchstart', 'touchmove'];\nvar IGNORE_CLASS_NAME = 'ignore-react-onclickoutside';\n/**\n * Options for addEventHandler and removeEventHandler\n */\n\nfunction getEventHandlerOptions(instance, eventName) {\n  var handlerOptions = null;\n  var isTouchEvent = touchEvents.indexOf(eventName) !== -1;\n\n  if (isTouchEvent && passiveEventSupport) {\n    handlerOptions = {\n      passive: !instance.props.preventDefault\n    };\n  }\n\n  return handlerOptions;\n}\n/**\n * This function generates the HOC function that you'll use\n * in order to impart onOutsideClick listening to an\n * arbitrary component. It gets called at the end of the\n * bootstrapping code to yield an instance of the\n * onClickOutsideHOC function defined inside setupHOC().\n */\n\n\nfunction onClickOutsideHOC(WrappedComponent, config) {\n  var _class, _temp;\n\n  return _temp = _class =\n  /*#__PURE__*/\n  function (_Component) {\n    _inheritsLoose(onClickOutside, _Component);\n\n    function onClickOutside(props) {\n      var _this;\n\n      _this = _Component.call(this, props) || this;\n\n      _this.__outsideClickHandler = function (event) {\n        if (typeof _this.__clickOutsideHandlerProp === 'function') {\n          _this.__clickOutsideHandlerProp(event);\n\n          return;\n        }\n\n        var instance = _this.getInstance();\n\n        if (typeof instance.props.handleClickOutside === 'function') {\n          instance.props.handleClickOutside(event);\n          return;\n        }\n\n        if (typeof instance.handleClickOutside === 'function') {\n          instance.handleClickOutside(event);\n          return;\n        }\n\n        throw new Error('WrappedComponent lacks a handleClickOutside(event) function for processing outside click events.');\n      };\n\n      _this.enableOnClickOutside = function () {\n        if (typeof document === 'undefined' || enabledInstances[_this._uid]) {\n          return;\n        }\n\n        if (typeof passiveEventSupport === 'undefined') {\n          passiveEventSupport = testPassiveEventSupport();\n        }\n\n        enabledInstances[_this._uid] = true;\n        var events = _this.props.eventTypes;\n\n        if (!events.forEach) {\n          events = [events];\n        }\n\n        handlersMap[_this._uid] = function (event) {\n          if (_this.props.disableOnClickOutside) return;\n          if (_this.componentNode === null) return;\n\n          if (_this.props.preventDefault) {\n            event.preventDefault();\n          }\n\n          if (_this.props.stopPropagation) {\n            event.stopPropagation();\n          }\n\n          if (_this.props.excludeScrollbar && clickedScrollbar(event)) return;\n          var current = event.target;\n\n          if (findHighest(current, _this.componentNode, _this.props.outsideClickIgnoreClass) !== document) {\n            return;\n          }\n\n          _this.__outsideClickHandler(event);\n        };\n\n        events.forEach(function (eventName) {\n          document.addEventListener(eventName, handlersMap[_this._uid], getEventHandlerOptions(_this, eventName));\n        });\n      };\n\n      _this.disableOnClickOutside = function () {\n        delete enabledInstances[_this._uid];\n        var fn = handlersMap[_this._uid];\n\n        if (fn && typeof document !== 'undefined') {\n          var events = _this.props.eventTypes;\n\n          if (!events.forEach) {\n            events = [events];\n          }\n\n          events.forEach(function (eventName) {\n            return document.removeEventListener(eventName, fn, getEventHandlerOptions(_this, eventName));\n          });\n          delete handlersMap[_this._uid];\n        }\n      };\n\n      _this.getRef = function (ref) {\n        return _this.instanceRef = ref;\n      };\n\n      _this._uid = uid();\n      return _this;\n    }\n    /**\n     * Access the WrappedComponent's instance.\n     */\n\n\n    var _proto = onClickOutside.prototype;\n\n    _proto.getInstance = function getInstance() {\n      if (!WrappedComponent.prototype.isReactComponent) {\n        return this;\n      }\n\n      var ref = this.instanceRef;\n      return ref.getInstance ? ref.getInstance() : ref;\n    };\n\n    /**\n     * Add click listeners to the current document,\n     * linked to this component's state.\n     */\n    _proto.componentDidMount = function componentDidMount() {\n      // If we are in an environment without a DOM such\n      // as shallow rendering or snapshots then we exit\n      // early to prevent any unhandled errors being thrown.\n      if (typeof document === 'undefined' || !document.createElement) {\n        return;\n      }\n\n      var instance = this.getInstance();\n\n      if (config && typeof config.handleClickOutside === 'function') {\n        this.__clickOutsideHandlerProp = config.handleClickOutside(instance);\n\n        if (typeof this.__clickOutsideHandlerProp !== 'function') {\n          throw new Error('WrappedComponent lacks a function for processing outside click events specified by the handleClickOutside config option.');\n        }\n      }\n\n      this.componentNode = findDOMNode(this.getInstance());\n      this.enableOnClickOutside();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      this.componentNode = findDOMNode(this.getInstance());\n    };\n    /**\n     * Remove all document's event listeners for this component\n     */\n\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.disableOnClickOutside();\n    };\n    /**\n     * Can be called to explicitly enable event listening\n     * for clicks and touches outside of this element.\n     */\n\n\n    /**\n     * Pass-through render\n     */\n    _proto.render = function render() {\n      // eslint-disable-next-line no-unused-vars\n      var _props = this.props,\n          excludeScrollbar = _props.excludeScrollbar,\n          props = _objectWithoutProperties(_props, [\"excludeScrollbar\"]);\n\n      if (WrappedComponent.prototype.isReactComponent) {\n        props.ref = this.getRef;\n      } else {\n        props.wrappedRef = this.getRef;\n      }\n\n      props.disableOnClickOutside = this.disableOnClickOutside;\n      props.enableOnClickOutside = this.enableOnClickOutside;\n      return createElement(WrappedComponent, props);\n    };\n\n    return onClickOutside;\n  }(Component), _class.displayName = \"OnClickOutside(\" + (WrappedComponent.displayName || WrappedComponent.name || 'Component') + \")\", _class.defaultProps = {\n    eventTypes: ['mousedown', 'touchstart'],\n    excludeScrollbar: config && config.excludeScrollbar || false,\n    outsideClickIgnoreClass: IGNORE_CLASS_NAME,\n    preventDefault: false,\n    stopPropagation: false\n  }, _class.getClass = function () {\n    return WrappedComponent.getClass ? WrappedComponent.getClass() : WrappedComponent;\n  }, _temp;\n}\n\nexport { IGNORE_CLASS_NAME };\nexport default onClickOutsideHOC;\n","import * as React from \"react\";\r\nimport { TodoTitle } from \"./todo-title\";\r\n\r\nexport interface CompletedTodoTitleProps {\r\n  title: string;\r\n  completionDate: Date;\r\n}\r\n\r\nexport class CompletedTodoTitle extends React.PureComponent<CompletedTodoTitleProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"todo-list-todo-title\">\r\n        {this.props.title}<br />\r\n        <small>Completed on {this.props.completionDate.toLocaleDateString()}</small>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoTitleProps {\r\n  title: string;\r\n}\r\n\r\nexport class TodoTitle extends React.PureComponent<TodoTitleProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"todo-list-todo-title\">{this.props.title}</div>\r\n    );\r\n  }\r\n}\r\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","import { AggregateIdType, allDomainEvents, DomainEvent, domainEventsByAggregate, DomainEventType } from \"event-store\";\r\n\r\nexport async function todoListEvents(): Promise<DomainEvent[]> {\r\n    // This app's domain and event-store are designed to accommodate multiple aggregates of different types.\r\n    // Currently, the app only has one aggregate type (TodoList) and only allows the user to have one instance of that aggregate.\r\n    // This todoLists() lookup occurs to get the aggregateId of the user's one TodoList.\r\n    let events = await allDomainEvents();\r\n    let lists = todoLists(events);\r\n    return (lists.length)\r\n        ? await domainEventsByAggregate(lists[0])\r\n        : [];\r\n}\r\n\r\nexport async function todoListId(): Promise<AggregateIdType | null> {\r\n    // This app's domain and event-store are designed to accommodate multiple aggregates of different types.\r\n    // Currently, the app only has one aggregate type (TodoList) and only allows the user to have one instance of that aggregate.\r\n    // This todoLists() lookup occurs to get the aggregateId of the user's one TodoList.\r\n    let events = await allDomainEvents();\r\n    let lists = todoLists(events);\r\n    return (lists.length)\r\n        ? lists[0]\r\n        : null;\r\n}\r\n\r\nfunction todoLists(events: DomainEvent[]): AggregateIdType[] {\r\n    return events.reduce<AggregateIdType[]>((p, c) => {\r\n        if (c.type === DomainEventType.TodoAdded && p.indexOf(c.aggregateId) === -1) {\r\n            p.push(c.aggregateId);\r\n        }\r\n        return p;\r\n    }, []);\r\n}\r\n","import * as React from \"react\";\r\nimport OnClickOut, { InjectedOnClickOutProps } from \"react-onclickoutside\";\r\n\r\nexport interface TodoActionsPanelBtnGroupProps {\r\n  showDefaultPanel(): void;\r\n}\r\n\r\nclass TodoActionsPanelBtnGroupInner extends React.PureComponent<TodoActionsPanelBtnGroupProps & InjectedOnClickOutProps> {\r\n  handleClickOutside = () => {\r\n    this.props.showDefaultPanel();\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"todo-list-todo-btn-group\">\r\n        <div className=\"btn-group\" role=\"group\">\r\n          {this.props.children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const TodoActionsPanelBtnGroup = OnClickOut<TodoActionsPanelBtnGroupProps>(TodoActionsPanelBtnGroupInner);\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoDeleteBtnProps {\r\n  deleteTodo(): void;\r\n}\r\n\r\nexport class TodoDeleteBtn extends React.PureComponent<TodoDeleteBtnProps> {\r\n  render() {\r\n    return (\r\n      <button onClick={this.props.deleteTodo} type=\"button\" className=\"btn btn-link\" aria-label=\"Delete\">\r\n        <span className=\"glyphicon glyphicon-trash\" aria-hidden=\"true\" />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoRenameBtnProps {\r\n  showRenamePanel(): void;\r\n}\r\n\r\nexport class TodoRenameBtn extends React.PureComponent<TodoRenameBtnProps> {\r\n  render() {\r\n    return (\r\n      <button onClick={this.props.showRenamePanel} type=\"button\" className=\"btn btn-link\"  aria-label=\"Rename\">\r\n        <span className=\"glyphicon glyphicon-pencil\" aria-hidden=\"true\" />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoPanelBtnGroupProps {\r\n  showActionsPanel(): void;\r\n}\r\n\r\nexport class TodoPanelBtnGroup extends React.PureComponent<TodoPanelBtnGroupProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"todo-list-todo-btn-group\">\r\n        <button onClick={this.props.showActionsPanel} type=\"button\" className=\"btn btn-link\" aria-label=\"Actions\">\r\n          <span className=\"glyphicon glyphicon-cog\" aria-hidden=\"true\" />\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport OnClickOut, { InjectedOnClickOutProps } from \"react-onclickoutside\";\r\nimport { Todo } from \"domain/todo\";\r\n\r\nexport interface TodoRenameFormProps {\r\n  todo: Todo;\r\n  renameTodo(name: string): void;\r\n  showDefaultPanel(): void;\r\n}\r\n\r\ninterface TodoRenameFormState {\r\n  value: string;\r\n}\r\n\r\nclass TodoRenameFormInner extends React.PureComponent<TodoRenameFormProps & InjectedOnClickOutProps, TodoRenameFormState> {\r\n  constructor(props: TodoRenameFormProps & InjectedOnClickOutProps) {\r\n    super(props);\r\n    this.state = {\r\n      value: this.props.todo.name,\r\n    };\r\n  }\r\n  handleClickOutside = () => {\r\n    this.props.showDefaultPanel();\r\n  }\r\n  onChange: React.ChangeEventHandler<HTMLInputElement> = e => {\r\n    this.setState({ value: e.target.value });\r\n  }\r\n  onSubmit: React.FormEventHandler<HTMLFormElement> = e => {\r\n    e.preventDefault();\r\n    this.props.renameTodo(this.state.value);\r\n    this.props.showDefaultPanel();\r\n  }\r\n  render() {\r\n    let inputId = \"todoRenameInput-\" + this.props.todo.id;\r\n    return (\r\n      <form role=\"form\" onSubmit={this.onSubmit}>\r\n        <label htmlFor={inputId} className=\"sr-only\">New Name</label>\r\n        <div className=\"input-group\">\r\n          <input id={inputId} name=\"name\" type=\"text\" className=\"form-control\" onChange={this.onChange} value={this.state.value} required />\r\n          <span className=\"input-group-btn\">\r\n            <button type=\"submit\" className=\"btn btn-success\" aria-label=\"Rename To-do\">\r\n              <span className=\"glyphicon glyphicon-pencil\" aria-hidden=\"true\" />\r\n            </button>\r\n          </span>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport const TodoRenameForm = OnClickOut<TodoRenameFormProps>(TodoRenameFormInner);\r\n","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport { Body } from \"components/body\";\r\nimport { todoListId } from \"read\";\r\nimport \"styles.css\";\r\n\r\nif (!window.indexedDB) {\r\n  window.alert(\"Your browser doesn't support IndexedDB (the browser feature this app uses to store your To-dos). Update your browser to its latest version.\");\r\n}\r\n\r\ntodoListId()\r\n  .then(id => {\r\n    ReactDOM.render(\r\n      <Body todoListId={id} />,\r\n      document.getElementById(\"app\"),\r\n    );\r\n  }).catch(console.log);\r\n","import * as React from \"react\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { TodoIdType } from \"domain/todo\";\r\nimport { TodoList } from \"domain/todo-list\";\r\nimport { AggregateIdType, DomainEvent, domainEventsByAggregate, postDomainEvents } from \"event-store\";\r\nimport { todoListEvents } from \"read\";\r\nimport { EventList } from \"./event-list\";\r\nimport { EventListEmpty } from \"./event-list-empty\";\r\nimport { HistoryTodoListPanel } from \"./history-todo-list-panel\";\r\nimport { TodoListPanel } from \"./todo-list-panel\";\r\n\r\nexport interface BodyProps {\r\n  todoListId: AggregateIdType | null;\r\n}\r\n\r\ninterface BodyState {\r\n  todoListId: AggregateIdType | null;\r\n  events: DomainEvent[];\r\n  history: boolean;\r\n  historyVersion: number;\r\n}\r\n\r\nexport class Body extends React.PureComponent<BodyProps, BodyState> {\r\n  constructor(props: BodyProps) {\r\n    super(props);\r\n    this.state = {\r\n      todoListId: props.todoListId,\r\n      events: [],\r\n      history: false,\r\n      historyVersion: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount(): void {\r\n    if (this.state.todoListId) {\r\n      domainEventsByAggregate(this.state.todoListId)\r\n        .then(events => { this.setState({ events }); })\r\n        .catch(console.log);\r\n    }\r\n  }\r\n  updateDomainTodoList = async (command: (todoList: TodoList) => void): Promise<void> => {\r\n    let events = (this.state.todoListId)\r\n      ? await domainEventsByAggregate(this.state.todoListId)\r\n      : await todoListEvents();\r\n    let todoList = new TodoList(events);\r\n    command(todoList);\r\n    await postDomainEvents(todoList.uncommittedEvents);\r\n    this.setState({\r\n      todoListId: todoList.id,\r\n      events: await domainEventsByAggregate(todoList.id),\r\n    });\r\n  }\r\n  addTodo = (name: string) => {\r\n    this.updateDomainTodoList(list => { list.add(uuid(), name); })\r\n      .catch(console.log);\r\n  }\r\n  completeTodo = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.complete(id, Date.now()); })\r\n      .catch(console.log);\r\n  }\r\n  uncompleteTodo = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.uncomplete(id); })\r\n      .catch(console.log);\r\n  }\r\n  deleteTodo = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.remove(id); })\r\n      .catch(console.log);\r\n  }\r\n  moveTodoUp = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.changePosition(id, -1); })\r\n      .catch(console.log);\r\n  }\r\n  moveTodoDown = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.changePosition(id, 1); })\r\n      .catch(console.log);\r\n  }\r\n  renametodo = (id: TodoIdType, name: string) => {\r\n    this.updateDomainTodoList(list => { list.rename(id, name); })\r\n      .catch(console.log);\r\n  }\r\n  showHistoryVersion = (version: number) => {\r\n    this.setState({ history: true, historyVersion: version });\r\n  }\r\n  showCurrentVersion = () => {\r\n    domainEventsByAggregate(this.state.todoListId as string)\r\n      .then(events => { this.setState({ events, history: false, historyVersion: 0 }); })\r\n      .catch(console.log);\r\n  }\r\n  render() {\r\n    let todoList = new TodoList(\r\n      this.state.history\r\n        ? this.state.events.slice(0, this.state.historyVersion)\r\n        : this.state.events\r\n    );\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-sm-8\">\r\n            {this.state.history\r\n              ? <HistoryTodoListPanel\r\n                todos={todoList.todos}\r\n                completedTodos={todoList.completedTodos}\r\n              />\r\n              : <TodoListPanel\r\n                todos={todoList.todos}\r\n                completedTodos={todoList.completedTodos}\r\n                addTodo={this.addTodo}\r\n                completeTodo={this.completeTodo}\r\n                uncompleteTodo={this.uncompleteTodo}\r\n                deleteTodo={this.deleteTodo}\r\n                moveTodoUp={this.moveTodoUp}\r\n                moveTodoDown={this.moveTodoDown}\r\n                renameTodo={this.renametodo}\r\n              />\r\n            }\r\n          </div>\r\n          <div className=\"col-sm-4\">\r\n            <h3>Domain Events</h3>\r\n            {this.state.events.length\r\n              ? <EventList\r\n                disableOnClickOutside={!this.state.history}\r\n                events={this.state.events}\r\n                showHistoryVersion={this.showHistoryVersion}\r\n                showCurrentVersion={this.showCurrentVersion} />\r\n              : <EventListEmpty />}\r\n          </div>\r\n        </div>\r\n        <footer>\r\n          <p>&copy; 2017 - Jon Brian Skog</p>\r\n        </footer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import { v4 as uuid } from \"uuid\";\r\nimport { AggregateRoot } from \"./aggregate-root\";\r\nimport { TodoAdded, TodoCompleted, TodoPositionChanged, TodoRemoved, TodoRenamed, TodoUncompleted } from \"./events\";\r\nimport { CompletedTodo, Todo, TodoIdType } from \"./todo\";\r\n\r\nexport class TodoList extends AggregateRoot {\r\n    protected _todos!: (Todo | CompletedTodo)[];\r\n    get todos(): Todo[] {\r\n        return this._todos.filter(x => !x.isCompleted);\r\n    }\r\n    get completedTodos(): CompletedTodo[] {\r\n        return (this._todos.filter(x => x.isCompleted) as CompletedTodo[])\r\n            .sort((x, y) => y.completionTimestamp - x.completionTimestamp);\r\n    }\r\n    protected init(): void {\r\n        super.init();\r\n        this._todos = [];\r\n    }\r\n\r\n    // Domain Event Handlers\r\n    protected TodoAdded(e: TodoAdded): void {\r\n        if (!this.id) {\r\n            this._id = e.aggregateId;\r\n        }\r\n        this._todos.push(new Todo(e.todoId, e.todoName));\r\n    }\r\n    protected TodoRemoved(e: TodoRemoved): void {\r\n        let i = this._todos.findIndex(x => x.id === e.todoId);\r\n        if (i !== -1) {\r\n            this._todos.splice(i, 1);\r\n        }\r\n    }\r\n    protected TodoCompleted(e: TodoCompleted): void {\r\n        let i = this._todos.findIndex(x => x.id === e.todoId);\r\n        if (i !== -1) {\r\n            let oldTodo = this._todos[i];\r\n            let newTodo = new CompletedTodo(oldTodo.id, oldTodo.name, e.todoCompletionTimestamp);\r\n            this._todos[i] = newTodo;\r\n        }\r\n    }\r\n    protected TodoUncompleted(e: TodoUncompleted): void {\r\n        let i = this._todos.findIndex(x => x.id === e.todoId);\r\n        if (i !== -1) {\r\n            let oldTodo = this._todos[i];\r\n            let newTodo = new Todo(oldTodo.id, oldTodo.name);\r\n            this._todos[i] = newTodo;\r\n        }\r\n    }\r\n    protected TodoRenamed(e: TodoRenamed): void {\r\n        let todo = this._todos.find(x => x.id === e.todoId);\r\n        if (todo) {\r\n            todo.name = e.todoName;\r\n        }\r\n    }\r\n    protected TodoPositionChanged(e: TodoPositionChanged): void {\r\n        let incompleteTodoPositions: number[] = this._todos.reduce<number[]>((p, c, i) => {\r\n            if (!c.isCompleted) {\r\n                p.push(i);\r\n            }\r\n            return p;\r\n        }, []);\r\n        let from = incompleteTodoPositions.findIndex(x => this._todos[x].id === e.todoId);\r\n        if (from === -1) {\r\n            return;\r\n        }\r\n        let to = from + e.todoOffset;\r\n        if (to < 0) {\r\n            to = 0;\r\n        } else if (to > incompleteTodoPositions.length - 1) {\r\n            to = incompleteTodoPositions.length - 1;\r\n        }\r\n        if (from === to) {\r\n            return;\r\n        }\r\n        if (to < from) {\r\n            for (let i = to; i < from; i++) {\r\n                arraySwap(this._todos, incompleteTodoPositions[from], incompleteTodoPositions[i]);\r\n            }\r\n        } else {\r\n            for (let i = to; i > from; i--) {\r\n                arraySwap(this._todos, incompleteTodoPositions[from], incompleteTodoPositions[i]);\r\n            }\r\n        }\r\n        function arraySwap(arr: any[], x: number, y: number): void {\r\n            let a = arr[x];\r\n            arr[x] = arr[y];\r\n            arr[y] = a;\r\n        }\r\n    }\r\n\r\n    add(id: TodoIdType, name: string): void {\r\n        let agId = this.id || uuid();\r\n        this.applyAndStage(new TodoAdded(agId, id, name));\r\n    }\r\n    remove(id: TodoIdType): void {\r\n        this.applyAndStage(new TodoRemoved(this.id, id));\r\n    }\r\n    complete(id: TodoIdType, completionTimestamp: number): void {\r\n        this.applyAndStage(new TodoCompleted(this.id, id, completionTimestamp));\r\n    }\r\n    uncomplete(id: TodoIdType): void {\r\n        this.applyAndStage(new TodoUncompleted(this.id, id));\r\n    }\r\n    rename(id: TodoIdType, name: string): void {\r\n        this.applyAndStage(new TodoRenamed(this.id, id, name));\r\n    }\r\n    changePosition(id: TodoIdType, offset: number): void {\r\n        this.applyAndStage(new TodoPositionChanged(this.id, id, offset));\r\n    }\r\n}\r\n","import { AggregateIdType, DomainEvent, DomainEventType, UncommittedDomainEvent } from \"event-store\";\r\n\r\nexport type DomainEventHandler = (e: UncommittedDomainEvent) => void;\r\n\r\nexport abstract class AggregateRoot {\r\n    [key: string]: any;\r\n    private _uncommittedEvents!: UncommittedDomainEvent[];\r\n    get uncommittedEvents(): UncommittedDomainEvent[] {\r\n        return this._uncommittedEvents;\r\n    }\r\n    protected _id!: AggregateIdType;\r\n    get id(): AggregateIdType {\r\n        return this._id;\r\n    }\r\n    protected init(): void {\r\n        this._uncommittedEvents = new Array<UncommittedDomainEvent>();\r\n    }\r\n    constructor(events: DomainEvent[]) {\r\n        this.init();\r\n        for (const e of events) {\r\n            (this[DomainEventType[e.type]] as DomainEventHandler)(e);\r\n        }\r\n    }\r\n    protected applyAndStage(e: UncommittedDomainEvent): void {\r\n        (this[DomainEventType[e.type]] as DomainEventHandler)(e);\r\n        this._uncommittedEvents.push(e);\r\n    }\r\n}\r\n","'use strict';\n\n(function() {\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function(resolve, reject) {\n      request.onsuccess = function() {\n        resolve(request.result);\n      };\n\n      request.onerror = function() {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function(resolve, reject) {\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function(value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function(prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function() {\n          return this[targetProp][prop];\n        },\n        set: function(val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', [\n    'name',\n    'keyPath',\n    'multiEntry',\n    'unique'\n  ]);\n\n  proxyRequestMethods(Index, '_index', IDBIndex, [\n    'get',\n    'getKey',\n    'getAll',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', [\n    'direction',\n    'key',\n    'primaryKey',\n    'value'\n  ]);\n\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, [\n    'update',\n    'delete'\n  ]);\n\n  // proxy 'next' methods\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function(methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n    Cursor.prototype[methodName] = function() {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function() {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n        return promisifyRequest(cursor._request).then(function(value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function() {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function() {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', [\n    'name',\n    'keyPath',\n    'indexNames',\n    'autoIncrement'\n  ]);\n\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'put',\n    'add',\n    'delete',\n    'clear',\n    'get',\n    'getAll',\n    'getKey',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, [\n    'deleteIndex'\n  ]);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function(resolve, reject) {\n      idbTransaction.oncomplete = function() {\n        resolve();\n      };\n      idbTransaction.onerror = function() {\n        reject(idbTransaction.error);\n      };\n      idbTransaction.onabort = function() {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function() {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', [\n    'objectStoreNames',\n    'mode'\n  ]);\n\n  proxyMethods(Transaction, '_tx', IDBTransaction, [\n    'abort'\n  ]);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function() {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, [\n    'deleteObjectStore',\n    'close'\n  ]);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function() {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(DB, '_db', IDBDatabase, [\n    'close'\n  ]);\n\n  // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n  ['openCursor', 'openKeyCursor'].forEach(function(funcName) {\n    [ObjectStore, Index].forEach(function(Constructor) {\n      // Don't create iterateKeyCursor if openKeyCursor doesn't exist.\n      if (!(funcName in Constructor.prototype)) return;\n\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function() {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n        request.onsuccess = function() {\n          callback(request.result);\n        };\n      };\n    });\n  });\n\n  // polyfill getAll\n  [Index, ObjectStore].forEach(function(Constructor) {\n    if (Constructor.prototype.getAll) return;\n    Constructor.prototype.getAll = function(query, count) {\n      var instance = this;\n      var items = [];\n\n      return new Promise(function(resolve) {\n        instance.iterateCursor(query, function(cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length == count) {\n            resolve(items);\n            return;\n          }\n          cursor.continue();\n        });\n      });\n    };\n  });\n\n  var exp = {\n    open: function(name, version, upgradeCallback) {\n      var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n      var request = p.request;\n\n      if (request) {\n        request.onupgradeneeded = function(event) {\n          if (upgradeCallback) {\n            upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n          }\n        };\n      }\n\n      return p.then(function(db) {\n        return new DB(db);\n      });\n    },\n    delete: function(name) {\n      return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n    }\n  };\n\n  if (typeof module !== 'undefined') {\n    module.exports = exp;\n    module.exports.default = module.exports;\n  }\n  else {\n    self.idb = exp;\n  }\n}());\n","import { AggregateIdType, DomainEventType, UncommittedDomainEvent } from \"event-store\";\r\nimport { TodoIdType } from \"./todo\";\r\n\r\nexport class TodoAdded implements UncommittedDomainEvent {\r\n    readonly type = DomainEventType.TodoAdded;\r\n    constructor(\r\n        readonly aggregateId: AggregateIdType,\r\n        readonly todoId: TodoIdType,\r\n        readonly todoName: string,\r\n    ) { }\r\n}\r\n\r\nexport class TodoRemoved implements UncommittedDomainEvent {\r\n    readonly type = DomainEventType.TodoRemoved;\r\n    constructor(\r\n        readonly aggregateId: AggregateIdType,\r\n        readonly todoId: TodoIdType,\r\n    ) { }\r\n}\r\n\r\nexport class TodoCompleted implements UncommittedDomainEvent {\r\n    readonly type = DomainEventType.TodoCompleted;\r\n    constructor(\r\n        readonly aggregateId: AggregateIdType,\r\n        readonly todoId: TodoIdType,\r\n        readonly todoCompletionTimestamp: number,\r\n    ) { }\r\n}\r\n\r\nexport class TodoUncompleted implements UncommittedDomainEvent {\r\n    readonly type = DomainEventType.TodoUncompleted;\r\n    constructor(\r\n        readonly aggregateId: AggregateIdType,\r\n        readonly todoId: TodoIdType,\r\n    ) { }\r\n}\r\n\r\nexport class TodoRenamed implements UncommittedDomainEvent {\r\n    readonly type = DomainEventType.TodoRenamed;\r\n    constructor(\r\n        readonly aggregateId: AggregateIdType,\r\n        readonly todoId: TodoIdType,\r\n        readonly todoName: string,\r\n    ) { }\r\n}\r\n\r\nexport class TodoPositionChanged implements UncommittedDomainEvent {\r\n    readonly type = DomainEventType.TodoPositionChanged;\r\n    constructor(\r\n        readonly aggregateId: AggregateIdType,\r\n        readonly todoId: TodoIdType,\r\n        readonly todoOffset: number,\r\n    ) { }\r\n}\r\n","export type TodoIdType = string;\r\n\r\nexport class Todo {\r\n    readonly isCompleted: boolean = false;\r\n    constructor(\r\n        readonly id: TodoIdType,\r\n        public name: string,\r\n    ) { }\r\n}\r\n\r\nexport class CompletedTodo extends Todo {\r\n    readonly isCompleted: boolean = true;\r\n    constructor(\r\n        id: TodoIdType,\r\n        name: string,\r\n        readonly completionTimestamp: number,\r\n    ) {\r\n        super(id, name);\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport OnClickOut, { InjectedOnClickOutProps } from \"react-onclickoutside\";\r\nimport { DomainEvent } from \"event-store\";\r\nimport { EventListItem } from \"./event-list-item\";\r\n\r\nexport interface EventListProps {\r\n  events: DomainEvent[];\r\n  showHistoryVersion(version: number): void;\r\n  showCurrentVersion(): void;\r\n}\r\n\r\nexport class EventListInner extends React.PureComponent<EventListProps & InjectedOnClickOutProps> {\r\n  handleClickOutside = () => {\r\n    this.props.showCurrentVersion();\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.events.map(event =>\r\n          <EventListItem\r\n            key={event.id}\r\n            event={event}\r\n            showHistoryVersion={this.props.showHistoryVersion}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const EventList = OnClickOut<EventListProps>(EventListInner);\r\n","import * as React from \"react\";\r\nimport { DomainEvent, DomainEventType } from \"event-store\";\r\n\r\nexport interface EventListItemProps {\r\n  event: DomainEvent;\r\n  showHistoryVersion(version: number): void;\r\n}\r\n\r\nexport class EventListItem extends React.PureComponent<EventListItemProps> {\r\n  showHistory: React.MouseEventHandler<HTMLButtonElement> = e => {\r\n    this.props.showHistoryVersion(this.props.event.id);\r\n  }\r\n  render() {\r\n    return (\r\n      <button onClick={this.showHistory} className=\"list-group-item event-list-item\">{this.props.event.id} : {DomainEventType[this.props.event.type]}</button>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport const EventListEmpty: React.SFC = () =>\r\n  <p><span className=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span> Add some to-dos to see events</p>;\r\n","import * as React from \"react\";\r\nimport { CompletedTodo, Todo } from \"domain/todo\";\r\nimport { HistoryCompletedTodoList } from \"./history-completed-todo-list\";\r\nimport { HistoryTodoList } from \"./history-todo-list\";\r\n\r\nexport interface HistoryTodoListPanelProps {\r\n  todos: Todo[];\r\n  completedTodos: CompletedTodo[];\r\n}\r\n\r\nexport class HistoryTodoListPanel extends React.PureComponent<HistoryTodoListPanelProps> {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h3 className=\"sr-only\">To-dos</h3>\r\n        <HistoryTodoList todos={this.props.todos} />\r\n        {this.props.completedTodos.length\r\n          ? <div>\r\n            <h3 className=\"sr-only\">Completed To-dos</h3>\r\n            <HistoryCompletedTodoList todos={this.props.completedTodos}\r\n            />\r\n          </div>\r\n          : null\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { CompletedTodo } from \"domain/todo\";\r\nimport { HistoryCompletedTodoListItem } from \"./history-completed-todo-list-item\";\r\n\r\nexport interface HistoryCompletedTodoListProps {\r\n  todos: CompletedTodo[];\r\n}\r\n\r\nexport class HistoryCompletedTodoList extends React.PureComponent<HistoryCompletedTodoListProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.todos.map(todo =>\r\n          <HistoryCompletedTodoListItem\r\n            key={todo.id}\r\n            todo={todo}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { CompletedTodo } from \"domain/todo\";\r\nimport { CompletedTodoTitle } from \"./completed-todo-title\";\r\n\r\nexport interface HistoryCompletedTodoListItemProps {\r\n  todo: CompletedTodo;\r\n}\r\n\r\nexport class HistoryCompletedTodoListItem extends React.PureComponent<HistoryCompletedTodoListItemProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item list-group-item-success\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <CompletedTodoTitle title={this.props.todo.name} completionDate={new Date(this.props.todo.completionTimestamp)} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo } from \"domain/todo\";\r\nimport { HistoryTodoListItem } from \"./history-todo-list-item\";\r\n\r\nexport interface HistoryTodoListProps {\r\n  todos: Todo[];\r\n}\r\n\r\nexport class HistoryTodoList extends React.PureComponent<HistoryTodoListProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.todos.map(todo =>\r\n          <HistoryTodoListItem\r\n            key={todo.id}\r\n            todo={todo}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo } from \"domain/todo\";\r\nimport { TodoTitle } from \"./todo-title\";\r\n\r\nexport interface HistoryTodoListItemProps {\r\n  todo: Todo;\r\n}\r\n\r\nexport class HistoryTodoListItem extends React.PureComponent<HistoryTodoListItemProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <TodoTitle title={this.props.todo.name} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { CompletedTodo, Todo, TodoIdType } from \"domain/todo\";\r\nimport { CompletedTodoList } from \"./completed-todo-list\";\r\nimport { TodoAddForm } from \"./todo-add-form\";\r\nimport { TodoList } from \"./todo-list\";\r\n\r\nexport interface TodoListPanelProps {\r\n  todos: Todo[];\r\n  completedTodos: CompletedTodo[];\r\n  addTodo(name: string): void;\r\n  completeTodo(id: TodoIdType): void;\r\n  uncompleteTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  moveTodoUp(id: TodoIdType): void;\r\n  moveTodoDown(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nexport class TodoListPanel extends React.PureComponent<TodoListPanelProps> {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <TodoAddForm addTodo={this.props.addTodo} />\r\n        <br />\r\n        <h3 className=\"sr-only\">To-dos</h3>\r\n        <TodoList\r\n          todos={this.props.todos}\r\n          completeTodo={this.props.completeTodo}\r\n          deleteTodo={this.props.deleteTodo}\r\n          moveTodoUp={this.props.moveTodoUp}\r\n          moveTodoDown={this.props.moveTodoDown}\r\n          renameTodo={this.props.renameTodo}\r\n        />\r\n        {this.props.completedTodos.length\r\n          ? <div>\r\n            <h3 className=\"sr-only\">Completed To-dos</h3>\r\n            <CompletedTodoList\r\n              todos={this.props.completedTodos}\r\n              uncompleteTodo={this.props.uncompleteTodo}\r\n              deleteTodo={this.props.deleteTodo}\r\n              renameTodo={this.props.renameTodo}\r\n            />\r\n          </div>\r\n          : null\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { CompletedTodo, TodoIdType } from \"domain/todo\";\r\nimport { CompletedTodoListItem } from \"./completed-todo-list-item\";\r\n\r\nexport interface CompletedTodoListProps {\r\n  todos: CompletedTodo[];\r\n  uncompleteTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nexport class CompletedTodoList extends React.PureComponent<CompletedTodoListProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.todos.map(todo =>\r\n          <CompletedTodoListItem\r\n            key={todo.id}\r\n            todo={todo}\r\n            uncompleteTodo={this.props.uncompleteTodo}\r\n            deleteTodo={this.props.deleteTodo}\r\n            renameTodo={this.props.renameTodo}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { CompletedTodo, TodoIdType } from \"domain/todo\";\r\nimport { CompletedTodoActionsPanel } from \"./completed-todo-actions-panel\";\r\nimport { CompletedTodoPanel } from \"./completed-todo-panel\";\r\nimport { CompletedTodoRenamePanel } from \"./completed-todo-rename-panel\";\r\n\r\nexport interface CompletedTodoListItemProps {\r\n  todo: CompletedTodo;\r\n  uncompleteTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nenum PanelType {\r\n  DefaultPanel,\r\n  ActionsPanel,\r\n  RenamePanel,\r\n}\r\n\r\ninterface CompletedTodoListItemState {\r\n  panel: PanelType;\r\n}\r\n\r\nexport class CompletedTodoListItem extends React.PureComponent<CompletedTodoListItemProps, CompletedTodoListItemState> {\r\n  constructor(props: CompletedTodoListItemProps) {\r\n    super(props);\r\n    this.state = {\r\n      panel: PanelType.DefaultPanel\r\n    };\r\n  }\r\n  uncompleteTodo = () => {\r\n    this.props.uncompleteTodo(this.props.todo.id);\r\n  }\r\n  deleteTodo = () => {\r\n    this.props.deleteTodo(this.props.todo.id);\r\n  }\r\n  renameTodo = (name: string) => {\r\n    this.props.renameTodo(this.props.todo.id, name);\r\n  }\r\n  showDefaultPanel = () => {\r\n    this.setState({\r\n      panel: PanelType.DefaultPanel\r\n    });\r\n  }\r\n  showActionsPanel = () => {\r\n    this.setState({\r\n      panel: PanelType.ActionsPanel\r\n    });\r\n  }\r\n  showRenamePanel = () => {\r\n    this.setState({\r\n      panel: PanelType.RenamePanel\r\n    });\r\n  }\r\n  render() {\r\n    let panel: JSX.Element | null;\r\n    switch (this.state.panel) {\r\n      case PanelType.DefaultPanel: {\r\n        panel =\r\n          <CompletedTodoPanel\r\n            todo={this.props.todo}\r\n            uncompleteTodo={this.uncompleteTodo}\r\n            showActionsPanel={this.showActionsPanel}\r\n          />;\r\n        break;\r\n      }\r\n      case PanelType.ActionsPanel: {\r\n        panel =\r\n          <CompletedTodoActionsPanel\r\n            todo={this.props.todo}\r\n            deleteTodo={this.deleteTodo}\r\n            showDefaultPanel={this.showDefaultPanel}\r\n            showRenamePanel={this.showRenamePanel}\r\n          />;\r\n        break;\r\n      }\r\n      case PanelType.RenamePanel: {\r\n        panel =\r\n          <CompletedTodoRenamePanel\r\n            todo={this.props.todo}\r\n            renameTodo={this.renameTodo}\r\n            showDefaultPanel={this.showDefaultPanel}\r\n          />;\r\n        break;\r\n      }\r\n      default: {\r\n        panel = null;\r\n        break;\r\n      }\r\n    }\r\n    return panel;\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { CompletedTodo } from \"domain/todo\";\r\nimport { CompletedTodoTitle } from \"./completed-todo-title\";\r\nimport { TodoActionsPanelBtnGroup } from \"./todo-actions-panel-btn-group\";\r\nimport { TodoDeleteBtn } from \"./todo-delete-btn\";\r\nimport { TodoRenameBtn } from \"./todo-rename-btn\";\r\n\r\nexport interface CompletedTodoActionsPanelProps {\r\n  todo: CompletedTodo;\r\n  deleteTodo(): void;\r\n  showDefaultPanel(): void;\r\n  showRenamePanel(): void;\r\n}\r\n\r\nexport class CompletedTodoActionsPanel extends React.PureComponent<CompletedTodoActionsPanelProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item list-group-item-success\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <CompletedTodoTitle title={this.props.todo.name} completionDate={new Date(this.props.todo.completionTimestamp)} />\r\n          <TodoActionsPanelBtnGroup showDefaultPanel={this.props.showDefaultPanel}>\r\n            <TodoDeleteBtn deleteTodo={this.props.deleteTodo} />\r\n            <TodoRenameBtn showRenamePanel={this.props.showRenamePanel} />\r\n          </ TodoActionsPanelBtnGroup>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { findDOMNode } from \"react-dom\";\r\nimport { CompletedTodo } from \"domain/todo\";\r\nimport { CompletedTodoTitle } from \"./completed-todo-title\";\r\nimport { TodoPanelBtnGroup } from \"./todo-panel-btn-group\";\r\n\r\nexport interface CompletedTodoPanelProps {\r\n  todo: CompletedTodo;\r\n  uncompleteTodo(): void;\r\n  showActionsPanel(): void;\r\n}\r\n\r\nexport class CompletedTodoPanel extends React.PureComponent<CompletedTodoPanelProps> {\r\n  btnGroup!: HTMLElement;\r\n  btnGroupRef: React.Ref<TodoPanelBtnGroup> = comp => {\r\n    if (comp) {\r\n      this.btnGroup = findDOMNode(comp) as HTMLElement;\r\n    }\r\n  }\r\n  onClick: React.MouseEventHandler<HTMLAnchorElement> = e => {\r\n    if (!this.btnGroup.contains(e.target as HTMLElement)) {\r\n      this.props.uncompleteTodo();\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <a onClick={this.onClick} className=\"list-group-item list-group-item-success\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <CompletedTodoTitle title={this.props.todo.name} completionDate={new Date(this.props.todo.completionTimestamp)} />\r\n          <TodoPanelBtnGroup\r\n            ref={this.btnGroupRef}\r\n            showActionsPanel={this.props.showActionsPanel} />\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo } from \"domain/todo\";\r\nimport { TodoRenameForm } from \"./todo-rename-form\";\r\n\r\nexport interface CompletedTodoRenamePanelProps {\r\n  todo: Todo;\r\n  renameTodo(name: string): void;\r\n  showDefaultPanel(): void;\r\n}\r\n\r\nexport class CompletedTodoRenamePanel extends React.PureComponent<CompletedTodoRenamePanelProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item list-group-item-success\">\r\n        <TodoRenameForm {...this.props} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoAddFormProps {\r\n  addTodo(name: string): void;\r\n}\r\n\r\ninterface TodoAddFormState {\r\n  value: string;\r\n}\r\n\r\nexport class TodoAddForm extends React.PureComponent<TodoAddFormProps, TodoAddFormState> {\r\n  constructor(props: TodoAddFormProps) {\r\n    super(props);\r\n    this.state = {\r\n      value: \"\",\r\n    };\r\n  }\r\n  reset = () => {\r\n    this.setState({ value: \"\" });\r\n  }\r\n  onChange: React.ChangeEventHandler<HTMLInputElement> = e => {\r\n    this.setState({ value: e.target.value });\r\n  }\r\n  onSubmit: React.FormEventHandler<HTMLFormElement> = e => {\r\n    e.preventDefault();\r\n    this.props.addTodo(this.state.value);\r\n    this.reset();\r\n  }\r\n  render() {\r\n    let inputId = \"todoAddInput\";\r\n    return (\r\n      <form role=\"form\" onSubmit={this.onSubmit}>\r\n        <label htmlFor={inputId} className=\"sr-only\">New To-do Name</label>\r\n        <div className=\"input-group\">\r\n          <input id={inputId} name=\"name\" type=\"text\" className=\"form-control\" placeholder=\"What do you need to do?\" onChange={this.onChange} value={this.state.value} required />\r\n          <span className=\"input-group-btn\">\r\n            <button type=\"submit\" className=\"btn btn-success\" aria-label=\"Add To-do\">\r\n              <span className=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\r\n            </button>\r\n          </span>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo, TodoIdType } from \"domain/todo\";\r\nimport { TodoListItem } from \"./todo-list-item\";\r\n\r\nexport interface TodoListProps {\r\n  todos: Todo[];\r\n  completeTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  moveTodoUp(id: TodoIdType): void;\r\n  moveTodoDown(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nexport class TodoList extends React.PureComponent<TodoListProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.todos.map(todo =>\r\n          <TodoListItem\r\n            key={todo.id}\r\n            todo={todo}\r\n            completeTodo={this.props.completeTodo}\r\n            deleteTodo={this.props.deleteTodo}\r\n            moveTodoUp={this.props.moveTodoUp}\r\n            moveTodoDown={this.props.moveTodoDown}\r\n            renameTodo={this.props.renameTodo}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo, TodoIdType } from \"domain/todo\";\r\nimport { TodoActionsPanel } from \"./todo-actions-panel\";\r\nimport { TodoPanel } from \"./todo-panel\";\r\nimport { TodoRenamePanel } from \"./todo-rename-panel\";\r\n\r\nexport interface TodoListItemProps {\r\n  todo: Todo;\r\n  completeTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  moveTodoUp(id: TodoIdType): void;\r\n  moveTodoDown(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nenum PanelType {\r\n  DefaultPanel,\r\n  ActionsPanel,\r\n  RenamePanel,\r\n}\r\n\r\ninterface TodoListItemState {\r\n  panel: PanelType;\r\n}\r\n\r\nexport class TodoListItem extends React.PureComponent<TodoListItemProps, TodoListItemState> {\r\n  constructor(props: TodoListItemProps) {\r\n    super(props);\r\n    this.state = {\r\n      panel: PanelType.DefaultPanel\r\n    };\r\n  }\r\n  completeTodo = () => {\r\n    this.props.completeTodo(this.props.todo.id);\r\n  }\r\n  deleteTodo = () => {\r\n    this.props.deleteTodo(this.props.todo.id);\r\n  }\r\n  moveTodoUp = () => {\r\n    this.props.moveTodoUp(this.props.todo.id);\r\n  }\r\n  moveTodoDown = () => {\r\n    this.props.moveTodoDown(this.props.todo.id);\r\n  }\r\n  renameTodo = (name: string) => {\r\n    this.props.renameTodo(this.props.todo.id, name);\r\n  }\r\n  showDefaultPanel = () => {\r\n    this.setState({\r\n      panel: PanelType.DefaultPanel\r\n    });\r\n  }\r\n  showActionsPanel = () => {\r\n    this.setState({\r\n      panel: PanelType.ActionsPanel\r\n    });\r\n  }\r\n  showRenamePanel = () => {\r\n    this.setState({\r\n      panel: PanelType.RenamePanel\r\n    });\r\n  }\r\n  render() {\r\n    let panel: JSX.Element | null;\r\n    switch (this.state.panel) {\r\n      case PanelType.DefaultPanel: {\r\n        panel =\r\n          <TodoPanel\r\n            todo={this.props.todo}\r\n            completeTodo={this.completeTodo}\r\n            showActionsPanel={this.showActionsPanel}\r\n          />;\r\n        break;\r\n      }\r\n      case PanelType.ActionsPanel: {\r\n        panel =\r\n          <TodoActionsPanel\r\n            todo={this.props.todo}\r\n            deleteTodo={this.deleteTodo}\r\n            moveTodoUp={this.moveTodoUp}\r\n            moveTodoDown={this.moveTodoDown}\r\n            showDefaultPanel={this.showDefaultPanel}\r\n            showRenamePanel={this.showRenamePanel}\r\n          />;\r\n        break;\r\n      }\r\n      case PanelType.RenamePanel: {\r\n        panel =\r\n          <TodoRenamePanel\r\n            todo={this.props.todo}\r\n            renameTodo={this.renameTodo}\r\n            showDefaultPanel={this.showDefaultPanel}\r\n          />;\r\n        break;\r\n      }\r\n      default: {\r\n        panel = null;\r\n        break;\r\n      }\r\n    }\r\n    return panel;\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo } from \"domain/todo\";\r\nimport { TodoActionsPanelBtnGroup } from \"./todo-actions-panel-btn-group\";\r\nimport { TodoDeleteBtn } from \"./todo-delete-btn\";\r\nimport { TodoMoveDownBtn } from \"./todo-move-down-btn\";\r\nimport { TodoMoveUpBtn } from \"./todo-move-up-btn\";\r\nimport { TodoRenameBtn } from \"./todo-rename-btn\";\r\nimport { TodoTitle } from \"./todo-title\";\r\n\r\nexport interface TodoActionsPanelProps {\r\n  todo: Todo;\r\n  deleteTodo(): void;\r\n  moveTodoUp(): void;\r\n  moveTodoDown(): void;\r\n  showDefaultPanel(): void;\r\n  showRenamePanel(): void;\r\n}\r\n\r\nexport class TodoActionsPanel extends React.PureComponent<TodoActionsPanelProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <TodoTitle title={this.props.todo.name} />\r\n          <TodoActionsPanelBtnGroup showDefaultPanel={this.props.showDefaultPanel}>\r\n            <TodoDeleteBtn deleteTodo={this.props.deleteTodo} />\r\n            <TodoMoveUpBtn moveTodoUp={this.props.moveTodoUp} />\r\n            <TodoMoveDownBtn moveTodoDown={this.props.moveTodoDown} />\r\n            <TodoRenameBtn showRenamePanel={this.props.showRenamePanel} />\r\n          </TodoActionsPanelBtnGroup>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoMoveDownBtnProps {\r\n  moveTodoDown(): void;\r\n}\r\n\r\nexport class TodoMoveDownBtn extends React.PureComponent<TodoMoveDownBtnProps> {\r\n  render() {\r\n    return (\r\n      <button onClick={this.props.moveTodoDown} type=\"button\" className=\"btn btn-link\" aria-label=\"Move down\">\r\n        <span className=\"glyphicon glyphicon-chevron-down\" aria-hidden=\"true\" />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nexport interface TodoMoveUpBtnProps {\r\n  moveTodoUp(): void;\r\n}\r\n\r\nexport class TodoMoveUpBtn extends React.PureComponent<TodoMoveUpBtnProps> {\r\n  render() {\r\n    return (\r\n      <button onClick={this.props.moveTodoUp} type=\"button\" className=\"btn btn-link\" aria-label=\"Move up\">\r\n        <span className=\"glyphicon glyphicon-chevron-up\" aria-hidden=\"true\" />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { findDOMNode } from \"react-dom\";\r\nimport { Todo } from \"domain/todo\";\r\nimport { TodoPanelBtnGroup } from \"./todo-panel-btn-group\";\r\nimport { TodoTitle } from \"./todo-title\";\r\n\r\nexport interface TodoPanelProps {\r\n  todo: Todo;\r\n  completeTodo(): void;\r\n  showActionsPanel(): void;\r\n}\r\n\r\nexport class TodoPanel extends React.PureComponent<TodoPanelProps> {\r\n  btnGroup!: HTMLElement;\r\n  btnGroupRef: React.Ref<TodoPanelBtnGroup> = comp => {\r\n    if (comp) {\r\n      this.btnGroup = findDOMNode(comp) as HTMLElement;\r\n    }\r\n  }\r\n  onClick: React.MouseEventHandler<HTMLAnchorElement> = e => {\r\n    if (!this.btnGroup.contains(e.target as HTMLElement)) {\r\n      this.props.completeTodo();\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <a onClick={this.onClick} className=\"list-group-item\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <TodoTitle title={this.props.todo.name} />\r\n          <TodoPanelBtnGroup\r\n            ref={this.btnGroupRef}\r\n            showActionsPanel={this.props.showActionsPanel} />\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n}\r\n","import * as React from \"react\";\r\nimport { Todo } from \"domain/todo\";\r\nimport { TodoRenameForm } from \"./todo-rename-form\";\r\n\r\nexport interface TodoRenamePanelProps {\r\n  todo: Todo;\r\n  renameTodo(name: string): void;\r\n  showDefaultPanel(): void;\r\n}\r\n\r\nexport class TodoRenamePanel extends React.PureComponent<TodoRenamePanelProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item\">\r\n        <TodoRenameForm {...this.props} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}